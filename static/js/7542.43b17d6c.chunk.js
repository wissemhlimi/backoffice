"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7542],{87542:function(e,t,i){i.r(t),i.d(t,{default:function(){return X}});var n=i(74165),a=i(15861),o=i(29439),s=i(47313),r=i(45788),l=i(63830),d=i(10499),c=i(46295),u=i(76747),m=function(e){return e.mediatique.form},f=(0,u.P1)([m],(function(e){return e.record})),h={selectInitLoading:(0,u.P1)([m],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,u.P1)([m],(function(e){return Boolean(e.saveLoading)})),selectRecord:f,selectRaw:m},p=i(37670),g=i(1413),v=i(92350),x=i(12196),Z=i(11829),j=i(73591),q=i(68197),b=i(59624),y=i(59420),R=i(96995),N=i(59491),E=i(43270),C=i(68160),A=i(6473),I=i(89994),S=i(67357),F=i(56148),w=i(5544),k=i(40358),P=i(96111),B=i(59945),L=i(87347),V=i(75352),D=i(68144),T=i(76733),z=i.n(T),M=i(46417),K=j.Z.TabPane,U=A.Ry().shape({titleFR:I.Z.string((0,d.ag)("entities.mediatique.fields.title"),{required:!1}),descriptionFR:I.Z.string((0,d.ag)("entities.mediatique.fields.description"),{}),titleAR:I.Z.string((0,d.ag)("entities.mediatique.fields.title"),{required:!1}),descriptionAR:I.Z.string((0,d.ag)("entities.mediatique.fields.description"),{}),titleEN:I.Z.string((0,d.ag)("entities.mediatique.fields.title"),{required:!1}),descriptionEN:I.Z.string((0,d.ag)("entities.mediatique.fields.description"),{}),type:I.Z.enumerator((0,d.ag)("entities.mediatique.fields.type"),{required:!0,options:k.Z.type}),link:I.Z.string((0,d.ag)("entities.mediatique.fields.type"),{}),photosAR:I.Z.images((0,d.ag)("entities.mediatique.fields.photos"),{}),videosAR:I.Z.files((0,d.ag)("entities.mediatique.fields.videos"),{}),attachementsAR:I.Z.files((0,d.ag)("entities.mediatique.fields.attachements"),{}),photos:I.Z.images((0,d.ag)("entities.mediatique.fields.photos"),{}),videos:I.Z.files((0,d.ag)("entities.mediatique.fields.videos"),{}),attachements:I.Z.files((0,d.ag)("entities.mediatique.fields.attachements"),{}),photosEN:I.Z.images((0,d.ag)("entities.mediatique.fields.photos"),{}),videosEN:I.Z.files((0,d.ag)("entities.mediatique.fields.videos"),{}),attachementsEN:I.Z.files((0,d.ag)("entities.mediatique.fields.attachements"),{})}),W=function(e){var t=(0,s.useState)((function(){var t=e.record||{};return{link:t.link,titleFR:t.titleFR,descriptionFR:t.descriptionFR,titleAR:t.titleAR,descriptionAR:t.descriptionAR,titleEN:t.titleEN,descriptionEN:t.descriptionEN,type:t.type,photosAR:t.photosAR||[],videosAR:t.videosAR||[],attachementsAR:t.attachementsAR||[],photos:t.photos||[],videos:t.videos||[],attachements:t.attachements||[],photosEN:t.photosEN||[],videosEN:t.videosEN||[],attachementsEN:t.attachementsEN||[]}})),i=(0,o.Z)(t,1)[0],n=(0,E.cI)({resolver:(0,S.X)(U),mode:"all",defaultValues:i}),a=function(t){var i;e.onSubmit(null===e||void 0===e||null===(i=e.record)||void 0===i?void 0:i.id,t,c,T,h)},r=(0,s.useState)(e.record.descriptionFR),l=(0,o.Z)(r,2),c=l[0],u=l[1],m=(0,s.useState)(e.record.descriptionEN),f=(0,o.Z)(m,2),h=f[0],p=f[1],A=(0,s.useState)(e.record.descriptionAR),I=(0,o.Z)(A,2),T=I[0],W=I[1],G=e.saveLoading;return(0,M.jsx)(C.ZP,{children:(0,M.jsx)(E.RV,(0,g.Z)((0,g.Z)({},n),{},{children:(0,M.jsxs)("form",{onSubmit:n.handleSubmit(a),children:[(0,M.jsxs)(q.Z,{gutter:24,children:[(0,M.jsx)(b.Z,{span:16,children:(0,M.jsx)(V.Z,{children:e.title})}),(0,M.jsx)(b.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,M.jsxs)(y.Z.Item,(0,g.Z)((0,g.Z)({className:"form-buttons"},C.YT),{},{children:[(0,M.jsx)(R.Z,{title:(0,d.ag)("common.save"),children:(0,M.jsx)(N.Z,{loading:G,type:"primary",onClick:n.handleSubmit(a),icon:(0,M.jsx)(v.Z,{rev:void 0})})}),(0,M.jsx)(R.Z,{title:(0,d.ag)("common.reset"),children:(0,M.jsx)(N.Z,{disabled:G,onClick:function(){Object.keys(i).forEach((function(e){n.setValue(e,i[e])}))},icon:(0,M.jsx)(x.Z,{rev:void 0})})}),e.onCancel&&(0,M.jsx)(R.Z,{title:(0,d.ag)("common.cancel"),children:(0,M.jsx)(N.Z,{disabled:G,onClick:function(){return e.onCancel()},icon:(0,M.jsx)(Z.Z,{rev:void 0})})})]}))})]}),(0,M.jsx)(q.Z,{gutter:24,children:(0,M.jsx)(b.Z,{span:24,children:(0,M.jsxs)(j.Z,{defaultActiveKey:"1",onChange:function(e){},children:[(0,M.jsx)(K,{tab:(0,d.ag)("common.informations"),children:(0,M.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,M.jsx)(F.Z,{name:"titleAR",label:(0,d.ag)("entities.mediatique.fields.title"),required:!1,layout:C.I4}),(0,M.jsx)(w.Z,{name:"type",label:(0,d.ag)("entities.mediatique.fields.type"),options:k.Z.type.map((function(e){return{value:e,label:(0,d.ag)("entities.mediatique.enumerators.type.".concat(e))}})),required:!0,layout:C.I4}),(0,M.jsxs)("div",{className:"ant-row ant-form-item ant-form-item-has-success",children:[(0,M.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-4",children:"Description:"}),(0,M.jsx)("div",{className:"ant-col ant-form-item-control ant-col-xs-24 ant-col-sm-24 ant-col-md-18 ant-col-lg-12",style:{border:"1px solid",borderColor:"rgb(195 195 195)",borderRadius:"5px"},children:(0,M.jsx)(D.CKEditor,{editor:z(),data:e.record.descriptionAR,onReady:function(e){},onChange:function(e,t){var i=t.getData();W(i)},onBlur:function(e,t){},onFocus:function(e,t){}})})]}),(0,M.jsx)(F.Z,{name:"link",label:(0,d.ag)("entities.mediatique.fields.link"),required:!1,layout:C.I4}),(0,M.jsx)(B.Z,{name:"photosAR",label:(0,d.ag)("entities.mediatique.fields.photos"),required:!1,storage:P.Z.values.mediatiquePhotos,max:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"videosAR",label:(0,d.ag)("entities.mediatique.fields.videos"),required:!1,storage:P.Z.values.mediatiqueVideos,max:void 0,formats:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"attachementsAR",label:(0,d.ag)("entities.mediatique.fields.attachements"),required:!1,storage:P.Z.values.mediatiqueAttachements,max:void 0,formats:void 0,layout:C.I4})]})},"1"),(0,M.jsx)(K,{tab:(0,d.ag)("common.informationsFR"),children:(0,M.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,M.jsx)(F.Z,{name:"titleFR",label:(0,d.ag)("entities.mediatique.fields.title"),required:!1,layout:C.I4}),(0,M.jsxs)("div",{className:"ant-row ant-form-item ant-form-item-has-success",children:[(0,M.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-4",children:"Description:"}),(0,M.jsx)("div",{className:"ant-col ant-form-item-control ant-col-xs-24 ant-col-sm-24 ant-col-md-18 ant-col-lg-12",style:{border:"1px solid",borderColor:"rgb(195 195 195)",borderRadius:"5px"},children:(0,M.jsx)(D.CKEditor,{editor:z(),data:e.record.descriptionFR,onReady:function(e){},onChange:function(e,t){var i=t.getData();u(i)},onBlur:function(e,t){},onFocus:function(e,t){}})})]}),(0,M.jsx)(B.Z,{name:"photos",label:(0,d.ag)("entities.mediatique.fields.photos"),required:!1,storage:P.Z.values.mediatiquePhotos,max:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"videos",label:(0,d.ag)("entities.mediatique.fields.videos"),required:!1,storage:P.Z.values.mediatiqueVideos,max:void 0,formats:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"attachements",label:(0,d.ag)("entities.mediatique.fields.attachements"),required:!1,storage:P.Z.values.mediatiqueAttachements,max:void 0,formats:void 0,layout:C.I4})]})},"2"),(0,M.jsx)(K,{tab:(0,d.ag)("common.informationsEN"),children:(0,M.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,M.jsx)(F.Z,{name:"titleEN",label:(0,d.ag)("entities.mediatique.fields.title"),required:!1,layout:C.I4}),(0,M.jsxs)("div",{className:"ant-row ant-form-item ant-form-item-has-success",children:[(0,M.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-4",children:"Description:"}),(0,M.jsx)("div",{className:"ant-col ant-form-item-control ant-col-xs-24 ant-col-sm-24 ant-col-md-18 ant-col-lg-12",style:{border:"1px solid",borderColor:"rgb(195 195 195)",borderRadius:"5px"},children:(0,M.jsx)(D.CKEditor,{editor:z(),data:e.record.descriptionEN,onReady:function(e){},onChange:function(e,t){var i=t.getData();p(i)},onBlur:function(e,t){},onFocus:function(e,t){}})})]}),(0,M.jsx)(B.Z,{name:"photosEN",label:(0,d.ag)("entities.mediatique.fields.photos"),required:!1,storage:P.Z.values.mediatiquePhotos,max:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"videosEN",label:(0,d.ag)("entities.mediatique.fields.videos"),required:!1,storage:P.Z.values.mediatiqueVideos,max:void 0,formats:void 0,layout:C.I4}),(0,M.jsx)(L.Z,{name:"attachementsEN",label:(0,d.ag)("entities.mediatique.fields.attachements"),required:!1,storage:P.Z.values.mediatiqueAttachements,max:void 0,formats:void 0,layout:C.I4})]})},"4")]})})})]})}))})},G=i(27829),O=i(53852),_=i(61567),X=function(e){var t=(0,s.useState)(!1),i=(0,o.Z)(t,2),u=i[0],m=i[1],f=(0,r.I0)(),g=(0,l.$B)(),v=(0,r.v9)(h.selectInitLoading),x=(0,r.v9)(h.selectSaveLoading),Z=(0,r.v9)(h.selectRecord),j=Boolean(g.params.id),q=j?(0,d.ag)("entities.mediatique.edit.title"):(0,d.ag)("entities.mediatique.new.title");(0,s.useEffect)((function(){f(c.Z.doInit(g.params.id)),m(!0)}),[f,g.params.id]);var b=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i,a,o,s){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(i.descriptionFR=a),o&&(i.descriptionAR=o),s&&(i.descriptionEN=s),f(j?c.Z.doUpdate(t,i):c.Z.doCreate(i));case 4:case"end":return e.stop()}}),e)})));return function(t,i,n,a,o){return e.apply(this,arguments)}}();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(O.Z,{items:[[(0,d.ag)("dashboard.menu"),"/"],[(0,d.ag)("entities.mediatique.menu"),"/mediatique"],[q]]}),(0,M.jsxs)(G.Z,{children:[v&&(0,M.jsx)(_.Z,{}),u&&!v&&(0,M.jsx)(W,{title:q,saveLoading:x,record:Z,isEditing:j,onSubmit:b,onCancel:function(){return(0,p.s1)().push("/mediatique")}})]})]})}},61567:function(e,t,i){var n=i(72652),a=(i(47313),i(46417));t.Z=function(e){return(0,a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,a.jsx)(n.Z,{})})}},59945:function(e,t,i){i.d(t,{Z:function(){return y}});var n,a=i(1413),o=i(59420),s=i(43270),r=i(47313),l=i(49384),d=i(93433),c=i(29439),u=i(26041),m=i(48216),f=i(6891),h=i(33512),p=i(30168),g=i(44781).ZP.div(n||(n=(0,p.Z)(["\n  .ant-upload-select-picture-card i {\n    font-size: 32px;\n    color: #999;\n  }\n\n  .ant-upload-select-picture-card .ant-upload-text {\n    margin-top: 8px;\n    color: #666;\n  }\n\n  .ant-upload-list-item-info > span {\n    width: 100%;\n    height: 100%;\n  }\n\n  .ant-upload-list-item-thumbnail > img {\n    object-fit: cover;\n  }\n"]))),v=i(10499),x=i(82508),Z=i(82138),j=i(46417),q=function(e){var t=(0,r.useState)(!1),i=(0,c.Z)(t,2),n=i[0],a=i[1],o=(0,r.useState)(!1),s=(0,c.Z)(o,2),l=s[0],p=s[1],q=(0,r.useState)(""),b=(0,c.Z)(q,2),y=b[0],R=b[1],N=function(){var t=e.value;return t?Array.isArray(t)?t:[t]:[]},E=function(){return N().map((function(e){return{uid:e.id||void 0,name:e.name,status:"done",url:e.downloadUrl,size:e.size,type:e.type}}))},C=function(e){a(!1),h.Z.showMessage(e)},A=e.max,I=(0,j.jsxs)("div",{children:[n?(0,j.jsx)(x.Z,{rev:void 0}):(0,j.jsx)(Z.Z,{rev:void 0}),(0,j.jsx)("div",{className:"ant-upload-text",children:(0,v.ag)("fileUploader.upload")})]});return(0,j.jsxs)(g,{children:[(0,j.jsx)(u.Z,{accept:"image/*",fileList:E(),listType:"picture-card",customRequest:function(t){f.Z.uploadFromRequest(t,{storage:e.storage,image:!0},(function(t){!function(t){a(!1),e.onChange([].concat((0,d.Z)(N()),[t]))}(t)}),(function(e){C(e)}))},onChange:function(t){var i;t&&t.file&&t.file.status&&("removed"===t.file.status?(i=t.file.uid,e.onChange(N().filter((function(e){return e.id!==i})))):a(!0))},onPreview:function(e){R(e.url),p(!0)},beforeUpload:function(t){try{return f.Z.validate(t,{storage:e.storage,image:!0}),!0}catch(i){return C(i),!1}},children:A&&E().length>=A?null:I}),(0,j.jsx)(m.Z,{visible:l,footer:null,onCancel:function(){p(!1)},children:(0,j.jsx)("img",{alt:y,style:{width:"100%"},src:y})})]})},b=function(e){var t=e.label,i=e.name,n=e.hint,d=e.layout,c=e.storage,u=e.max,m=e.required,f=e.externalErrorMessage,h=(0,s.Gc)(),p=h.errors,g=h.formState,v=g.touched,x=g.isSubmitted,Z=h.setValue,b=h.watch,y=h.register;(0,r.useEffect)((function(){y({name:i})}),[y,i]);var R=l.Z.errorMessage(i,p,v,x,f),N=R||n;return(0,j.jsx)(o.Z.Item,(0,a.Z)((0,a.Z)({},d),{},{label:t,required:m,validateStatus:R?"error":"success",help:N,children:(0,j.jsx)(q,{storage:c,value:b(i),onChange:function(t){Z(i,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},max:u})}))};b.defaultProps={layout:null,max:void 0,required:!1};var y=b},5544:function(e,t,i){var n=i(1413),a=i(59420),o=i(61143),s=i(47313),r=i(49384),l=i(43270),d=i(46417),c=function(e){var t=e.label,i=e.name,c=e.hint,u=e.layout,m=e.size,f=e.placeholder,h=e.options,p=e.mode,g=e.autoFocus,v=e.required,x=e.externalErrorMessage,Z=e.optionFilterProp,j=(0,l.Gc)(),q=j.register,b=j.errors,y=j.formState,R=y.touched,N=y.isSubmitted,E=j.setValue,C=j.watch,A=r.Z.errorMessage(i,b,R,N,x),I=C(i);return(0,s.useEffect)((function(){q({name:i})}),[q,i]),(0,d.jsx)(a.Z.Item,(0,n.Z)((0,n.Z)({},u),{},{label:t,validateStatus:A?"error":"success",required:v,help:A||c,children:(0,d.jsx)(o.Z,{id:i,onChange:function(t){E(i,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},value:I,size:m||void 0,placeholder:f||void 0,autoFocus:g||!1,mode:p||void 0,optionFilterProp:Z||"children",allowClear:!0,style:{width:"100%"},children:h.map((function(e){return(0,d.jsx)(o.Z.Option,{value:e.value,title:e.title,children:e.label},e.value)}))})}))};c.defaultProps={layout:null,required:!1},t.Z=c}}]);