"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7390],{89994:function(e,n,r){var t=r(93433),i=r(6473),a=r(10499),o=r(70816),u=r.n(o),l={generic:function(e){return i.nK().label(e)},string:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),n.matches&&(r=r.matches(n.matches)),r},boolean:function(e,n){return i.Xg().default(!1).label(e)},relationToOne:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).transform((function(e,n){return n?n.id:null}));return n.required&&(r=r.required()),r},stringArray:function(e,n){n=n||{};var r=i.IX().compact().ensure().of(i.Z_().transform((function(e,n){return""===n?null:e})).trim()).label(e);return n.required&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},relationToMany:function(e,n){n=n||{};var r=i.IX().nullable(!0).label(e).transform((function(e,n){return n&&n.length?n.map((function(e){return e.id})):[]}));return n.required&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},integer:function(e,n){n=n||{};var r=i.Rx().transform((function(e,n){return""===n?null:e})).integer().nullable(!0).label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),r},images:function(e,n){n=n||{};var r=i.IX().nullable(!0).label(e);return(n.required||n.min)&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},files:function(e,n){n=n||{};var r=i.IX().compact().ensure().nullable(!0).label(e);return(n.required||n.min)&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},enumerator:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).label(e).nullable(!0).oneOf([null].concat((0,t.Z)(n.options||[])));return n.required&&(r=r.required((0,a.ag)("validation.string.selected"))),r},email:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e).email();return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),n.matches&&(r=r.matches(n.matches)),r},decimal:function(e,n){n=n||{};var r=i.Rx().transform((function(e,n){return""===n?null:e})).nullable(!0).label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),r},datetime:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).transform((function(e,n){return e?u()(n,"YYYY-MM-DD HH:mm").toISOString():null}));return n.required&&(r=r.required()),r},date:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).test("is-date",(0,a.ag)("validation.mixed.default"),(function(e){return!e||u()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?u()(e).format("YYYY-MM-DD"):null}));return n.required&&(r=r.required()),r}};n.Z=l},27829:function(e,n,r){var t,i=r(30168),a=r(44781).ZP.div(t||(t=(0,i.Z)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));n.Z=a},53852:function(e,n,r){var t=r(28709),i=(r(47313),r(28303)),a=r(46417);n.Z=function(e){var n=function(e){return e.length>1};return(0,a.jsx)(t.Z,{children:e.items.map((function(e){return(0,a.jsx)(t.Z.Item,{children:n(e)?(0,a.jsx)(i.rU,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},61567:function(e,n,r){var t=r(72652),i=(r(47313),r(46417));n.Z=function(e){return(0,i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,i.jsx)(t.Z,{})})}},49384:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(15671),i=r(43144),a=function(){function e(){(0,t.Z)(this,e)}return(0,i.Z)(e,null,[{key:"errorMessage",value:function(e,n,r,t){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(a)return a;if(!t&&!r[e])return null;var o=n[e];return(null===o||void 0===o||null===(i=o[0])||void 0===i?void 0:i.message)||(null===o||void 0===o?void 0:o.message)||o||null}}]),e}()},51552:function(e,n,r){var t=r(1413),i=r(74165),a=r(15861),o=r(29439),u=r(82138),l=r(61143),s=r(59420),d=r(59491),c=r(65375),m=r.n(c),f=r(47313),p=r(10499),h=r(49384),x=r(65237),v=r(43270),g=r(46417),Z=function(e){var n=(0,v.Gc)(),r=n.errors,c=n.watch,Z=n.setValue,b=n.register,y=n.formState,j=y.touched,q=y.isSubmitted,C=e.label,w=e.name,k=e.hint,S=e.layout,I=e.size,M=e.placeholder,Y=e.autoFocus,T=e.externalErrorMessage,V=e.defaultActiveFirstOption,D=e.allowClear,B=e.mode,F=e.required,L=e.fetchFn,E=e.mapper,A=c(w);(0,f.useEffect)((function(){b({name:w})}),[b,w]);var O=(0,f.useState)([]),P=(0,o.Z)(O,2),R=P[0],_=P[1],H=(0,f.useState)([]),X=(0,o.Z)(H,2),z=X[0],K=X[1],G=(0,f.useState)([]),N=(0,o.Z)(G,2),U=N[0],W=N[1],$=(0,f.useState)(!1),J=(0,o.Z)($,2),Q=J[0],ee=J[1],ne=(0,f.useRef)("NOT_INITIALIZED");(0,f.useEffect)((function(){re()}),[A]),(0,f.useEffect)((function(){le("")}),[]);var re=function(){if(A){var e=("multiple"===B?A:[A])||[];e=e.filter(Boolean).map(E.toAutocomplete).map((function(e){return{id:e.key,label:e.label}})),K((function(n){return m()(n,e,"id")})),_((function(n){return m()(n,e,"id")}))}},te=e.inMemoryFilter?z:R,ie=function(e){return(te||[]).find((function(n){return n.id===e.key}))||e},ae="multiple"===B?A?A.map((function(e){return E.toAutocomplete(ie(e))})):[]:function(){if(A)return E.toAutocomplete(ie(A))}(),oe=function(n){if(!n)return Z(w,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return E.toValue(e)}));Z(w,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},ue=function(n){if(!n)return Z(w,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var r=E.toValue(n);Z(w,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},le=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inMemoryFilter){n.next=2;break}return n.abrupt("return",se(r));case 2:return n.abrupt("return",ce(r));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=U)&&r.length){e.next=5;break}return e.next=4,de();case 4:r=e.sent;case 5:K(r.filter((function(e){return String(e.label||"").toLowerCase().includes(String(n||"").toLowerCase())}))),ee(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,L();case 4:return n=e.sent,W(n),ee(!1),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),W([]),ee(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==ne.current){e.next=2;break}return e.abrupt("return");case 2:return ne.current=n,ee(!0),e.prev=4,e.next=7,L(n,100);case 7:r=e.sent,ne.current===n&&(ee(!1),_(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),ne.current===n&&(ee(!1),_([]));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n){return e.apply(this,arguments)}}(),me=(0,x.Z)(le,300);(0,f.useEffect)((function(){return function(){me.flush()}}),[me]);var fe=te.filter((function(e){return Boolean(e.id)})).map((function(e){return(0,g.jsx)(l.Z.Option,{value:e.id,children:e.label},e.id)})),pe=h.Z.errorMessage(w,r,j,q,T);return(0,g.jsx)(s.Z.Item,(0,t.Z)((0,t.Z)({},S),{},{label:C,required:F,validateStatus:pe?"error":"success",help:Q?(0,p.ag)("autocomplete.loading"):pe||k,children:(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsx)(l.Z,{id:w,showSearch:!0,mode:B,labelInValue:!0,showArrow:!1,filterOption:!1,notFoundContent:null,onChange:function(e){return"multiple"===B?oe(e):ue(e)},onBlur:function(n){e.onBlur&&e.onBlur(n)},value:ae,onSearch:me.callback,placeholder:M||void 0,size:I||void 0,autoFocus:Y||!1,defaultActiveFirstOption:V,allowClear:D,children:fe}),e.showCreate&&e.hasPermissionToCreate?(0,g.jsx)(d.Z,{style:{marginLeft:"16px",flexShrink:0},type:"primary",icon:(0,g.jsx)(u.Z,{rev:void 0}),onClick:e.onOpenModal,htmlType:"button"}):null]})}))};Z.defaultProps={layout:null,defaultActiveFirstOption:!0,allowClear:!0,mode:"default",required:!1,inMemoryFilter:!1},n.Z=Z},71896:function(e,n,r){var t=r(1413),i=r(59420),a=r(27083),o=r(47313),u=r(49384),l=r(43270),s=r(46417),d=function(e){var n=e.label,r=e.name,d=e.hint,c=e.layout,m=e.autoFocus,f=e.showTime,p=e.required,h=e.placeholder,x=e.externalErrorMessage,v=(0,l.Gc)(),g=v.register,Z=v.errors,b=v.formState,y=b.touched,j=b.isSubmitted,q=v.setValue,C=v.watch,w=u.Z.errorMessage(r,Z,y,j,x);return(0,o.useEffect)((function(){g({name:r})}),[g,r]),(0,s.jsx)(i.Z.Item,(0,t.Z)((0,t.Z)({},c),{},{label:n,required:p,validateStatus:w?"error":"success",help:w||d,children:(0,s.jsx)(a.Z,{onChange:function(n){q(r,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},value:C(r),onBlur:function(n){e.onBlur&&e.onBlur(n)},autoFocus:m||!1,style:{width:"100%"},showTime:f?{format:"HH:mm"}:void 0,format:f?"YYYY-MM-DD HH:mm":void 0,placeholder:h})}))};d.defaultProps={layout:null,showTime:!1,required:!1},n.Z=d},56148:function(e,n,r){var t=r(1413),i=r(59420),a=r(46937),o=r(43270),u=r(47313),l=r(49384),s=r(46417),d=function(e){var n=e.label,r=e.name,d=e.hint,c=e.layout,m=e.size,f=e.type,p=e.placeholder,h=e.autoFocus,x=e.autoComplete,v=e.prefix,g=e.externalErrorMessage,Z=e.required,b=e.addonAfter,y=e.maxLength,j=(0,o.Gc)(),q=j.setValue,C=j.watch,w=j.register,k=j.errors,S=j.formState,I=S.touched,M=S.isSubmitted;(0,u.useEffect)((function(){w({name:r})}),[w,r]);var Y=l.Z.errorMessage(r,k,I,M,g);return(0,s.jsx)(i.Z.Item,(0,t.Z)((0,t.Z)({},c),{},{label:n,required:Z,validateStatus:Y?"error":"success",help:Y||d,children:(0,s.jsx)(a.Z,{maxLength:y,id:r,name:r,type:f,value:C(r),onChange:function(n){q(r,n.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},size:m||void 0,placeholder:p||void 0,autoFocus:h||!1,autoComplete:x||void 0,prefix:v||void 0,addonAfter:b||void 0,style:{width:"100%"}})}))};d.defaultProps={layout:null,type:"text",required:!1},n.Z=d},68160:function(e,n,r){r.d(n,{I4:function(){return o},YT:function(){return u}});var t,i=r(30168),a=r(44781).ZP.div(t||(t=(0,i.Z)(["\n  // padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-form-item-with-help {\n    margin-bottom: 24px;\n  }\n\n  .form-buttons {\n    .ant-btn {\n      margin-top: 8px;\n      margin-right: 8px;\n    }\n  }\n\n  // input {\n  //  font-variant: tabular-nums;\n  //   list-style: none;\n  //   font-feature-settings: 'tnum';\n  //   position: relative;\n  //   display: inline-block;\n  //   width: 100%;\n  //   min-width: 0;\n  //   padding: 4px 11px;\n  //   color: rgba(0, 0, 0, 0.65);\n  //   font-size: 14px;\n  //   line-height: 1.5715;\n  //   background-color: #fff;\n  //   background-image: none;\n  //   border: 1px solid #d9d9d9;\n  //   border-radius: 4px;\n  //   transition: all 0.3s;\n  // }\n"]))),o={labelCol:{xs:{span:24},sm:{span:24},md:{span:6},lg:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:18},lg:{span:12}}},u={wrapperCol:{md:{span:18,offset:6},lg:{span:12,offset:4}}};n.ZP=a},75352:function(e,n,r){var t,i=r(30168),a=r(44781).ZP.h1(t||(t=(0,i.Z)(["\n  margin-bottom: 36px;\n"])));n.Z=a},34960:function(e,n,r){var t=r(1413),i=r(29439),a=r(92350),o=r(12196),u=r(11829),l=r(68197),s=r(59624),d=r(59420),c=r(96995),m=r(59491),f=r(43270),p=r(47313),h=r(10499),x=r(68160),v=r(6473),g=r(89994),Z=r(67357),b=r(56148),y=r(70816),j=r.n(y),q=r(71896),C=r(62053),w=r(75352),k=r(46417),S=v.Ry().shape({date:g.Z.date((0,h.ag)("entities.source.fields.date"),{}),media:g.Z.relationToOne((0,h.ag)("entities.source.fields.media"),{}),link:g.Z.string((0,h.ag)("entities.source.fields.link"),{}),mediaTitle:g.Z.string((0,h.ag)("entities.source.fields.link"),{})});n.Z=function(e){var n=(0,p.useState)((function(){var n=e.record||{};return{date:n.date?j()(n.date,"YYYY-MM-DD"):null,media:n.media,link:n.link,mediaTitle:n.mediaTitle}})),r=(0,i.Z)(n,1)[0],v=(0,f.cI)({resolver:(0,Z.X)(S),mode:"all",defaultValues:r}),g=function(n){var r,i=(0,t.Z)((0,t.Z)({},n),{},{mediaTitle:v.getValues().media.label});e.onSubmit(null===e||void 0===e||null===(r=e.record)||void 0===r?void 0:r.id,i,v.getValues().media.label)},y=e.saveLoading;return(0,k.jsx)(x.ZP,{children:(0,k.jsx)(f.RV,(0,t.Z)((0,t.Z)({},v),{},{children:(0,k.jsxs)("form",{onSubmit:v.handleSubmit(g),children:[(0,k.jsxs)(l.Z,{gutter:24,children:[(0,k.jsx)(s.Z,{span:16,children:(0,k.jsx)(w.Z,{children:e.title})}),(0,k.jsx)(s.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,k.jsxs)(d.Z.Item,(0,t.Z)((0,t.Z)({className:"form-buttons"},x.YT),{},{children:[(0,k.jsx)(c.Z,{title:(0,h.ag)("common.save"),children:(0,k.jsx)(m.Z,{loading:y,type:"primary",onClick:v.handleSubmit(g),icon:(0,k.jsx)(a.Z,{rev:void 0})})}),(0,k.jsx)(c.Z,{title:(0,h.ag)("common.reset"),children:(0,k.jsx)(m.Z,{disabled:y,onClick:function(){Object.keys(r).forEach((function(e){v.setValue(e,r[e])}))},icon:(0,k.jsx)(o.Z,{rev:void 0})})}),e.onCancel&&(0,k.jsx)(c.Z,{title:(0,h.ag)("common.cancel"),children:(0,k.jsx)(m.Z,{disabled:y,onClick:function(){return e.onCancel()},icon:(0,k.jsx)(u.Z,{rev:void 0})})})]}))})]}),(0,k.jsx)(l.Z,{gutter:24,children:(0,k.jsx)(s.Z,{span:24,children:(0,k.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,k.jsx)("legend",{children:(0,h.ag)("common.informations")}),(0,k.jsx)(q.Z,{name:"date",label:(0,h.ag)("entities.source.fields.date"),required:!1,layout:x.I4}),(0,k.jsx)(C.Z,{name:"media",label:(0,h.ag)("entities.source.fields.media"),required:!1,showCreate:!e.modal,layout:x.I4}),(0,k.jsx)(b.Z,{name:"link",label:(0,h.ag)("entities.source.fields.link"),required:!1,layout:x.I4}),(0,k.jsx)("div",{style:{display:"none"},children:(0,k.jsx)(b.Z,{name:"mediaTitle",label:(0,h.ag)("entities.source.fields.link"),required:!1,layout:x.I4})})]})})})]})}))})}},53825:function(e,n,r){r.r(n),r.d(n,{default:function(){return Z}});var t=r(29439),i=r(47313),a=r(45788),o=r(63830),u=r(10499),l=r(57765),s=r(76747),d=function(e){return e.source.form},c=(0,s.P1)([d],(function(e){return e.record})),m={selectInitLoading:(0,s.P1)([d],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,s.P1)([d],(function(e){return Boolean(e.saveLoading)})),selectRecord:c,selectRaw:d},f=r(37670),p=r(34960),h=r(27829),x=r(53852),v=r(61567),g=r(46417),Z=function(e){var n=(0,i.useState)(!1),r=(0,t.Z)(n,2),s=r[0],d=r[1],c=(0,a.I0)(),Z=(0,o.$B)(),b=(0,a.v9)(m.selectInitLoading),y=(0,a.v9)(m.selectSaveLoading),j=(0,a.v9)(m.selectRecord),q=Boolean(Z.params.id),C=q?(0,u.ag)("entities.source.edit.title"):(0,u.ag)("entities.source.new.title");(0,i.useEffect)((function(){c(l.Z.doInit(Z.params.id)),d(!0)}),[c,Z.params.id]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{items:[[(0,u.ag)("dashboard.menu"),"/"],[(0,u.ag)("entities.source.menu"),"/source"],[C]]}),(0,g.jsxs)(h.Z,{children:[b&&(0,g.jsx)(v.Z,{}),s&&!b&&(0,g.jsx)(p.Z,{title:C,saveLoading:y,record:j,isEditing:q,onSubmit:function(e,n,r){n.mediaTitle=r,c(q?l.Z.doUpdate(e,n):l.Z.doCreate(n))},onCancel:function(){return(0,f.s1)().push("/source")}})]})]})}}}]);