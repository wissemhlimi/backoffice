"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[9397],{9397:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=n(29439),a=n(47313),d=n(45788),r=n(63830),s=n(10499),l=n(94691),o=n(76747),u=function(e){return e.demandeAlerte.form},c=(0,o.P1)([u],(function(e){return e.record})),m={selectInitLoading:(0,o.P1)([u],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,o.P1)([u],(function(e){return Boolean(e.saveLoading)})),selectRecord:c,selectRaw:u},f=n(37670),g=n(1413),Z=n(92350),x=n(12196),v=n(11829),h=n(68197),j=n(59624),p=n(59420),A=n(96995),b=n(59491),y=n(43270),C=n(68160),I=n(6473),S=n(89994),L=n(67357),q=n(56148),w=n(30513),k=n(96111),B=n(87347),R=n(75352),E=n(46417),F=I.Ry().shape({sujet:S.Z.string((0,s.ag)("entities.demandeAlerte.fields.sujet"),{required:!0}),description:S.Z.string((0,s.ag)("entities.demandeAlerte.fields.description"),{}),files:S.Z.files((0,s.ag)("entities.demandeAlerte.fields.files"),{}),media:S.Z.files((0,s.ag)("entities.demandeAlerte.fields.media"),{}),audio:S.Z.files((0,s.ag)("entities.demandeAlerte.fields.audio"),{}),contact:S.Z.string((0,s.ag)("entities.demandeAlerte.fields.contact"),{})}),P=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{sujet:t.sujet,description:t.description,files:t.files||[],media:t.media||[],audio:t.audio||[],contact:t.contact}})),n=(0,i.Z)(t,1)[0],d=(0,y.cI)({resolver:(0,L.X)(F),mode:"all",defaultValues:n}),r=function(t){var n;e.onSubmit(null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.id,t)},l=e.saveLoading;return(0,E.jsx)(C.ZP,{children:(0,E.jsx)(y.RV,(0,g.Z)((0,g.Z)({},d),{},{children:(0,E.jsxs)("form",{onSubmit:d.handleSubmit(r),children:[(0,E.jsxs)(h.Z,{gutter:24,children:[(0,E.jsx)(j.Z,{span:16,children:(0,E.jsx)(R.Z,{children:e.title})}),(0,E.jsx)(j.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,E.jsxs)(p.Z.Item,(0,g.Z)((0,g.Z)({className:"form-buttons"},C.YT),{},{children:[(0,E.jsx)(A.Z,{title:(0,s.ag)("common.save"),children:(0,E.jsx)(b.Z,{loading:l,type:"primary",onClick:d.handleSubmit(r),icon:(0,E.jsx)(Z.Z,{rev:void 0})})}),(0,E.jsx)(A.Z,{title:(0,s.ag)("common.reset"),children:(0,E.jsx)(b.Z,{disabled:l,onClick:function(){Object.keys(n).forEach((function(e){d.setValue(e,n[e])}))},icon:(0,E.jsx)(x.Z,{rev:void 0})})}),e.onCancel&&(0,E.jsx)(A.Z,{title:(0,s.ag)("common.cancel"),children:(0,E.jsx)(b.Z,{disabled:l,onClick:function(){return e.onCancel()},icon:(0,E.jsx)(v.Z,{rev:void 0})})})]}))})]}),(0,E.jsx)(q.Z,{name:"sujet",label:(0,s.ag)("entities.demandeAlerte.fields.sujet"),required:!0,layout:C.I4,autoFocus:!0}),(0,E.jsx)(w.Z,{name:"description",label:(0,s.ag)("entities.demandeAlerte.fields.description"),required:!1,layout:C.I4}),(0,E.jsx)(B.Z,{name:"files",label:(0,s.ag)("entities.demandeAlerte.fields.files"),required:!1,storage:k.Z.values.demandeAlerteFiles,max:void 0,formats:void 0,layout:C.I4}),(0,E.jsx)(B.Z,{name:"media",label:(0,s.ag)("entities.demandeAlerte.fields.media"),required:!1,storage:k.Z.values.demandeAlerteMedia,max:void 0,formats:void 0,layout:C.I4}),(0,E.jsx)(B.Z,{name:"audio",label:(0,s.ag)("entities.demandeAlerte.fields.audio"),required:!1,storage:k.Z.values.demandeAlerteAudio,max:void 0,formats:void 0,layout:C.I4}),(0,E.jsx)(q.Z,{name:"contact",label:(0,s.ag)("entities.demandeAlerte.fields.contact"),required:!1,layout:C.I4})]})}))})},V=n(27829),M=n(53852),T=n(61567),_=function(e){var t=(0,a.useState)(!1),n=(0,i.Z)(t,2),o=n[0],u=n[1],c=(0,d.I0)(),g=(0,r.$B)(),Z=(0,d.v9)(m.selectInitLoading),x=(0,d.v9)(m.selectSaveLoading),v=(0,d.v9)(m.selectRecord),h=Boolean(g.params.id),j=h?(0,s.ag)("entities.demandeAlerte.edit.title"):(0,s.ag)("entities.demandeAlerte.new.title");(0,a.useEffect)((function(){c(l.Z.doInit(g.params.id)),u(!0)}),[c,g.params.id]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(M.Z,{items:[[(0,s.ag)("dashboard.menu"),"/"],[(0,s.ag)("entities.demandeAlerte.menu"),"/demande-alerte"],[j]]}),(0,E.jsxs)(V.Z,{children:[Z&&(0,E.jsx)(T.Z,{}),o&&!Z&&(0,E.jsx)(P,{title:j,saveLoading:x,record:v,isEditing:h,onSubmit:function(e,t){c(h?l.Z.doUpdate(e,t):l.Z.doCreate(t))},onCancel:function(){return(0,f.s1)().push("/demande-alerte")}})]})]})}},61567:function(e,t,n){var i=n(72652),a=(n(47313),n(46417));t.Z=function(e){return(0,a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,a.jsx)(i.Z,{})})}},30513:function(e,t,n){var i=n(1413),a=n(59420),d=n(46937),r=n(43270),s=n(47313),l=n(49384),o=n(46417),u=function(e){var t=e.label,n=e.name,u=e.hint,c=e.layout,m=e.placeholder,f=e.autoFocus,g=e.autoComplete,Z=e.prefix,x=e.required,v=e.rows,h=e.externalErrorMessage,j=e.maxLength,p=(0,r.Gc)(),A=p.register,b=p.errors,y=p.formState,C=y.touched,I=y.isSubmitted,S=p.setValue,L=p.watch,q=l.Z.errorMessage(n,b,C,I,h),w=L(n);return(0,s.useEffect)((function(){A({name:n})}),[A,n]),(0,o.jsx)(a.Z.Item,(0,i.Z)((0,i.Z)({},c),{},{label:t,required:x,validateStatus:q?"error":"success",help:q||u,children:(0,o.jsx)(d.Z.TextArea,{id:n,onChange:function(t){S(n,t.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},maxLength:j,value:w,placeholder:m||void 0,autoFocus:f||!1,autoComplete:g||void 0,prefix:Z||void 0,rows:v,style:{width:"100%"}})}))};u.defaultProps={layout:null,required:!1,rows:4},t.Z=u}}]);