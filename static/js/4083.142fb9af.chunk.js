"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[4083],{40846:function(n,e,t){var r=t(70816),a=t.n(r),l=t(10499),i={enumerator:function(n){return function(e){return e?(0,l.ag)("".concat(n,".").concat(e)):null}},enumeratorMultiple:function(n){return function(e){return e?e.map((function(e){return(0,l.ag)("".concat(n,".").concat(e))})).join(", "):null}},generic:function(){return function(n){return n}},stringArray:function(){return function(n){return(n||[]).join(", ")}},json:function(){return function(n){return n?JSON.stringify(n,null,2):null}},decimal:function(n){return function(e){return o(e,n)}},boolean:function(n,e){return function(t){return null==t?null:Boolean(t)?n||(0,l.ag)("common.yes"):e||(0,l.ag)("common.no")}},relationToOne:function(){return function(n){return n&&n.label||null}},relationToMany:function(){return function(n){return(n||[]).map((function(n){return n.label})).join(", ")}},filesOrImages:function(){return function(n){return(n||[]).map((function(n){return n.downloadUrl})).join(" ")}},date:function(){return function(n){return u(n)}},dateRange:function(){return function(n){if(!n||!n.length)return null;var e=n[0],t=2===n.length&&n[1];return e||t?e&&!t?"> ".concat(u(e)):!e&&t?"< ".concat(u(t)):"".concat(u(e)," - ").concat(u(t)):null}},datetime:function(){return function(n){return c(n)}},datetimeRange:function(){return function(n){if(!n||!n.length)return null;var e=n[0],t=2===n.length&&n[1];return e||t?e&&!t?"> ".concat(c(e)):!e&&t?"< ".concat(c(t)):"".concat(c(e)," - ").concat(c(t)):null}},decimalRange:function(n){return function(e){if(!e||!e.length)return null;var t=e[0],r=2===e.length&&e[1];return null==t&&null==r?null:null!=t&&null==r?"> ".concat(o(t,n)):null==t&&null!=r?"< ".concat(o(r,n)):"".concat(o(t,n)," - ").concat(o(r,n))}},range:function(){return function(n){if(!n||!n.length)return null;var e=n[0],t=2===n.length&&n[1];return null!=e&&""!==e||null!=t&&""!==t?null==e||null!=t&&""!==t?null!=e&&""!==e||null==t?"".concat(e," - ").concat(t):"< ".concat(t):"> ".concat(e):null}}};function o(n,e){return n?e?Number(n).toFixed(e):Number(n):null}function u(n){return n?a()(n).format("YYYY-MM-DD"):null}function c(n){return n?a()(n).format("YYYY-MM-DD HH:mm"):null}e.Z=i},47590:function(n,e,t){var r=t(6473),a=t(10499),l=t(70816),i=t.n(l),o={generic:function(n){return r.nK().label(n)},string:function(n){return r.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n)},stringArray:function(n){return r.IX().compact().ensure().of(r.Z_().transform((function(n,e){return""===e?null:n})).trim()).label(n).transform((function(n,e){return e?Array.isArray(e)?e:[e]:e}))},boolean:function(n){return r.Xg().nullable(!0).label(n)},relationToOne:function(n){return r.nK().label(n).transform((function(n,e){return e?e.id:null}))},relationToMany:function(n){return r.nK().label(n).transform((function(n,e){return e&&e.length?e.map((function(n){return n.id})):[]}))},json:function(n){return r.nK().label(n)},integer:function(n){return r.Rx().transform((function(n,e){return""===e?null:n})).integer().nullable(!0).label(n)},integerRange:function(n){return r.nK().label(n)},enumerator:function(n){return r.Z_().transform((function(n,e){return""===e?null:n})).label(n).nullable(!0)},email:function(n){return r.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n)},decimal:function(n){return r.Rx().transform((function(n,e){return""===e?null:n})).nullable(!0).label(n)},decimalRange:function(n){return r.IX().ensure().compact().of(r.Rx().transform((function(n,e){return""===e?null:n})).nullable(!0).label(n)).label(n)},datetime:function(n){return r.nK().nullable(!0).label(n).transform((function(n,e){return e?i()(e,"YYYY-MM-DD HH:mm").toISOString():null}))},datetimeRange:function(n){return r.nK().label(n)},date:function(n){return r.nK().nullable(!0).label(n).test("is-date",(0,a.ag)("validation.mixed.default"),(function(n){return!n||i()(n,"YYYY-MM-DD").isValid()}))},dateRange:function(n){return r.IX().ensure().compact().of(r.nK().nullable(!0).label(n).test("is-date",(0,a.ag)("validation.mixed.default"),(function(n){return!n||i()(n,"YYYY-MM-DD").isValid()})).transform((function(n){return n?i()(n).format("YYYY-MM-DD"):null}))).label(n)}};e.Z=o},44083:function(n,e,t){t.r(e),t.d(e,{default:function(){return U}});var r=t(47313),a=t(10499),l=t(1413),i=t(29439),o=t(40765),u=t(12196),c=t(68197),s=t(59624),d=t(59491),f=t(43270),m=t(45788),g=t(63830),h=t(35188),x=t(23516),v=t(25803),Z=t(56148),p=t(37943),b=t(69138),y=t(31172),j=t(6473),w=t(47590),I=t(67357),Y=t(13586),C=t(40846),L=t(35432),R=t(46417),B=j.Ry().shape({timestampRange:w.Z.datetimeRange((0,a.ag)("auditLog.fields.timestampRange")),entityNames:w.Z.stringArray((0,a.ag)("auditLog.fields.entityNames")),entityId:w.Z.string((0,a.ag)("auditLog.fields.entityId")),action:w.Z.string((0,a.ag)("auditLog.fields.action")),createdByEmail:w.Z.email((0,a.ag)("auditLog.fields.createdByEmail"))}),M={timestampRange:[],entityNames:[],entityId:null,action:null,createdByEmail:null},N={timestampRange:{label:(0,a.ag)("auditLog.fields.timestampRange"),render:C.Z.datetimeRange()},entityNames:{label:(0,a.ag)("auditLog.fields.entityNames"),render:C.Z.stringArray()},entityId:{label:(0,a.ag)("auditLog.fields.entityId"),render:C.Z.generic()},action:{label:(0,a.ag)("auditLog.fields.action"),render:C.Z.generic()},createdByEmail:{label:(0,a.ag)("auditLog.fields.createdByEmail"),render:C.Z.generic()}},S=function(n){var e=(0,m.I0)(),t=(0,g.TH)(),j=(0,m.v9)(x.Z.selectRawFilter),w=(0,r.useState)(!1),C=(0,i.Z)(w,2),S=C[0],E=C[1],k=(0,r.useState)((function(){var n=(0,l.Z)((0,l.Z)({},M),j),e=y.parse(t.search);return n.entityNames=e.entityNames||n.entityNames,n.entityNames&&!Array.isArray(n.entityNames)&&(n.entityNames=[n.entityNames]),n.entityId=e.entityId||n.entityId,n.createdByEmail=e.createdByEmail||n.createdByEmail,n})),D=(0,i.Z)(k,1)[0],T=(0,f.cI)({resolver:(0,I.X)(B),defaultValues:D,mode:"all"});(0,r.useEffect)((function(){e(h.Z.doFetch(B.cast(D),j))}),[]);var F=function(n){var t=T.getValues();e(h.Z.doFetch(n,t)),E(!1)},P=n.loading;return(0,R.jsx)(b.Z,{children:(0,R.jsx)(L.Z,{activeKey:S?"filter":void 0,expandIconPosition:"right",ghost:!0,onChange:function(n){E(Boolean(n.length))},children:(0,R.jsx)(L.Z.Panel,{style:{marginTop:"10px",marginBottom:"10px"},header:(0,R.jsx)(Y.Z,{renders:N,values:j,expanded:S,onRemove:function(n){return T.setValue(n,M[n]),T.handleSubmit(F)()}}),children:(0,R.jsx)(f.RV,(0,l.Z)((0,l.Z)({},T),{},{children:(0,R.jsxs)("form",{onSubmit:T.handleSubmit(F),children:[(0,R.jsxs)(c.Z,{gutter:24,children:[(0,R.jsx)(s.Z,{xs:24,md:24,lg:12,children:(0,R.jsx)(v.Z,{name:"timestampRange",label:(0,a.ag)("auditLog.fields.timestampRange"),layout:b.T,showTime:!0})}),(0,R.jsx)(s.Z,{xs:24,md:24,lg:12,children:(0,R.jsx)(Z.Z,{name:"createdByEmail",label:(0,a.ag)("auditLog.fields.createdByEmail"),layout:b.T})}),(0,R.jsx)(s.Z,{xs:24,md:24,lg:12,children:(0,R.jsx)(p.Z,{name:"entityNames",label:(0,a.ag)("auditLog.fields.entityNames"),notFoundContent:(0,a.ag)("auditLog.entityNamesHint"),layout:b.T})}),(0,R.jsx)(s.Z,{xs:24,md:24,lg:12,children:(0,R.jsx)(Z.Z,{name:"entityId",label:(0,a.ag)("auditLog.fields.entityId"),layout:b.T})}),(0,R.jsx)(s.Z,{xs:24,md:24,lg:12,children:(0,R.jsx)(Z.Z,{name:"action",label:(0,a.ag)("auditLog.fields.action"),layout:b.T})})]}),(0,R.jsx)(c.Z,{children:(0,R.jsxs)(s.Z,{className:"filter-buttons",span:24,children:[(0,R.jsx)(d.Z,{loading:P,icon:(0,R.jsx)(o.Z,{rev:void 0}),type:"primary",htmlType:"submit",children:(0,a.ag)("common.search")}),(0,R.jsx)(d.Z,{loading:P,onClick:function(){Object.keys(M).forEach((function(n){T.setValue(n,M[n])})),e(h.Z.doReset()),E(!1)},icon:(0,R.jsx)(u.Z,{rev:void 0}),children:(0,a.ag)("common.reset")})]})})]})}))},"filter")})})},E=t(96995),k=t(72641),D=t(48216),T=t(75010),F=t(60044),P=function(n){return(0,R.jsx)(T.Z,{language:"json",style:F.Z,children:n.code})},H=function(n){return n.visible?(0,R.jsx)(D.Z,{title:(0,a.ag)("auditLog.title"),visible:n.visible,onCancel:function(){return n.onCancel()},footer:!1,children:(0,R.jsx)(P,{code:n.code})}):null},V=t(82509),A=t(27216),K=t(70816),q=t.n(K),O=function(n){var e=(0,m.I0)(),t=(0,m.v9)(x.Z.selectLoading),l=(0,m.v9)(x.Z.selectRows),o=(0,m.v9)(x.Z.selectPagination),u=(0,r.useState)(null),c=(0,i.Z)(u,2),s=c[0],d=c[1],f=[{title:(0,a.ag)("auditLog.fields.timestamp"),sorter:!0,dataIndex:"timestamp",render:function(n){return n?q()(n).format("YYYY-MM-DD HH:mm"):null}},{title:(0,a.ag)("auditLog.fields.createdByEmail"),sorter:!0,dataIndex:"createdByEmail"},{title:(0,a.ag)("auditLog.fields.entityName"),sorter:!0,dataIndex:"entityName"},{title:(0,a.ag)("auditLog.fields.action"),sorter:!0,dataIndex:"action"},{title:(0,a.ag)("auditLog.fields.entityId"),sorter:!0,dataIndex:"entityId"},{title:null,dataIndex:"values",render:function(n){return(0,R.jsx)(V.Z,{onClick:function(){return d(JSON.stringify(n,null,2))},children:(0,R.jsx)(E.Z,{title:(0,a.ag)("common.view"),children:(0,R.jsx)("i",{className:"fa-regular fa-eye table-actions-icon"})})})}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(A.Z,{children:(0,R.jsx)(k.Z,{rowKey:"id",loading:t,columns:f,dataSource:l,pagination:o,onChange:function(n,t,r){e(h.Z.doChangePaginationAndSort(n,r))},scroll:{x:!0}})}),(0,R.jsx)(H,{visible:Boolean(s),code:s,onCancel:function(){d(null)}})]})},_=t(10419),X=function(n){(0,m.I0)(),(0,m.v9)(x.Z.selectLoading),(0,m.v9)(x.Z.selectExportLoading),(0,m.v9)(x.Z.selectHasRows);return(0,R.jsx)(_.Z,{children:void 0})},G=t(27829),z=t(53852),J=t(75352),U=function(n){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(z.Z,{items:[[(0,a.ag)("dashboard.menu"),"/"],[(0,a.ag)("auditLog.menu")]]}),(0,R.jsxs)(G.Z,{children:[(0,R.jsx)(J.Z,{children:(0,a.ag)("auditLog.title")}),(0,R.jsx)(X,{}),(0,R.jsx)(S,{}),(0,R.jsx)(O,{})]})]})}},27829:function(n,e,t){var r,a=t(30168),l=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));e.Z=l},53852:function(n,e,t){var r=t(28709),a=(t(47313),t(28303)),l=t(46417);e.Z=function(n){var e=function(n){return n.length>1};return(0,l.jsx)(r.Z,{children:n.items.map((function(n){return(0,l.jsx)(r.Z.Item,{children:e(n)?(0,l.jsx)(a.rU,{to:n[1],children:n[0]}):n[0]},n[0])}))})}},13586:function(n,e,t){t.d(e,{Z:function(){return i}});t(47313);var r=t(10499),a=t(66204),l=t(46417);function i(n){var e=n.values,t=n.renders,i=n.onClick,o=n.onRemove,u=Object.keys(e||{}).map((function(n){return t[n]?{key:n,label:t[n].label,value:t[n].render(e[n])}:{value:null}})).filter((function(n){return n.value||0===n.value||!1===n.value}));return(0,l.jsx)("div",{onClick:i,className:"filter-preview",children:!u.length||n.expanded?(0,r.ag)("common.filters"):(0,l.jsxs)(l.Fragment,{children:[(0,r.ag)("common.filters"),":",(0,l.jsx)("span",{className:"filter-preview-values",children:u.map((function(n){return(0,l.jsx)(a.Z,{closable:Boolean(o),onClose:o?function(){return o(n.key)}:void 0,children:"".concat(n.label,": ").concat(n.value)},n.label)}))})]})})}},49384:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(15671),a=t(43144),l=function(){function n(){(0,r.Z)(this,n)}return(0,a.Z)(n,null,[{key:"errorMessage",value:function(n,e,t,r){var a,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(l)return l;if(!r&&!t[n])return null;var i=e[n];return(null===i||void 0===i||null===(a=i[0])||void 0===a?void 0:a.message)||(null===i||void 0===i?void 0:i.message)||i||null}}]),n}()},25803:function(n,e,t){var r=t(1413),a=t(59420),l=t(27083),i=t(47313),o=t(49384),u=t(43270),c=t(46417),s=function(n){var e=n.label,t=n.name,s=n.hint,d=n.layout,f=n.autoFocus,m=n.showTime,g=n.required,h=n.externalErrorMessage,x=(0,u.Gc)(),v=x.register,Z=x.errors,p=x.formState,b=p.touched,y=p.isSubmitted,j=x.setValue,w=x.watch;(0,i.useEffect)((function(){v({name:t})}),[v,t]);var I=o.Z.errorMessage(t,Z,b,y,h);return(0,c.jsx)(a.Z.Item,(0,r.Z)((0,r.Z)({},d),{},{label:e,validateStatus:I?"error":"success",help:I||s,required:g,children:(0,c.jsx)(l.Z.RangePicker,{name:t,onChange:function(e){j(t,e,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e)},onBlur:function(e){n.onBlur&&n.onBlur(e)},value:w(t),autoFocus:f||!1,style:{width:"100%"},showTime:m?{format:"HH:mm"}:void 0,format:m?"YYYY-MM-DD HH:mm":void 0})}))};s.defaultProps={layout:null,showTime:!1},e.Z=s},56148:function(n,e,t){var r=t(1413),a=t(59420),l=t(46937),i=t(43270),o=t(47313),u=t(49384),c=t(46417),s=function(n){var e=n.label,t=n.name,s=n.hint,d=n.layout,f=n.size,m=n.type,g=n.placeholder,h=n.autoFocus,x=n.autoComplete,v=n.prefix,Z=n.externalErrorMessage,p=n.required,b=n.addonAfter,y=n.maxLength,j=(0,i.Gc)(),w=j.setValue,I=j.watch,Y=j.register,C=j.errors,L=j.formState,R=L.touched,B=L.isSubmitted;(0,o.useEffect)((function(){Y({name:t})}),[Y,t]);var M=u.Z.errorMessage(t,C,R,B,Z);return(0,c.jsx)(a.Z.Item,(0,r.Z)((0,r.Z)({},d),{},{label:e,required:p,validateStatus:M?"error":"success",help:M||s,children:(0,c.jsx)(l.Z,{maxLength:y,id:t,name:t,type:m,value:I(t),onChange:function(e){w(t,e.target.value,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e.target.value)},onBlur:function(e){n.onBlur&&n.onBlur(e)},size:f||void 0,placeholder:g||void 0,autoFocus:h||!1,autoComplete:x||void 0,prefix:v||void 0,addonAfter:b||void 0,style:{width:"100%"}})}))};s.defaultProps={layout:null,type:"text",required:!1},e.Z=s},37943:function(n,e,t){var r=t(1413),a=t(59420),l=t(61143),i=t(43270),o=t(47313),u=t(49384),c=t(46417),s=function(n){var e=n.label,t=n.name,s=n.hint,d=n.layout,f=n.placeholder,m=n.autoFocus,g=n.notFoundContent,h=n.externalErrorMessage,x=n.required,v=(0,i.Gc)(),Z=v.register,p=v.errors,b=v.formState,y=b.touched,j=b.isSubmitted,w=v.setValue,I=v.watch,Y=u.Z.errorMessage(t,p,y,j,h);(0,o.useEffect)((function(){Z({name:t})}),[Z,t]);var C=I(t);return(0,c.jsx)(a.Z.Item,(0,r.Z)((0,r.Z)({},d),{},{label:e,validateStatus:Y?"error":"success",required:x,help:Y||s,children:(0,c.jsx)(l.Z,{mode:"tags",style:{width:"100%"},value:C,onChange:function(e){w(t,e,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e)},onBlur:function(e){n.onBlur&&n.onBlur(e)},notFoundContent:g,placeholder:f||void 0,autoFocus:m||!1})}))};s.defaultProps={layout:null,tokenSeparators:[","],required:!1},e.Z=s},82509:function(n,e,t){var r,a=t(30168),l=t(44781).ZP.button(r||(r=(0,a.Z)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  color: var(--link-color);\n  text-decoration: none;\n  display: inline;\n  margin: 0;\n  padding: 0;\n\n  &:hover {\n    text-decoration: none;\n  }\n  &:focus {\n    text-decoration: none;\n  }\n"])));e.Z=l},69138:function(n,e,t){t.d(e,{T:function(){return i}});var r,a=t(30168),l=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  margin-bottom: 16px;\n  border: 1px solid #e9e9e9;\n  border-radius: 5px;\n\n  .filter-preview {\n    color: var(--secondary-color) !important;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n\n  .filter-preview-values {\n    margin-left: 8px;\n    display: flex;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n  }\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .filter-buttons {\n    text-align: right;\n\n    .ant-btn {\n      margin-left: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"]))),i={labelCol:{xs:{span:24},sm:{span:24},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:18}}};e.Z=l},75352:function(n,e,t){var r,a=t(30168),l=t(44781).ZP.h1(r||(r=(0,a.Z)(["\n  margin-bottom: 36px;\n"])));e.Z=l},27216:function(n,e,t){var r,a=t(30168),l=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  .ant-table th {\n    background: var(--primary-color);\n\n    color: white;\n  }\n  .ant-table tr:nth-child(even) {\n    background: #d9d9d9;\n  }\n  .ant-table td {\n    overflow: hidden;\n    white-space: nowrap;\n    max-width: 150px;\n    text-overflow: ellipsis;\n    \n    \n  }\n\n  .ant-table .table-actions {\n    text-align: right;\n  }\n\n  .ant-table .table-actions a,\n  .ant-table .table-actions button {\n    margin-left: 8px;\n  }\n"])));e.Z=l},10419:function(n,e,t){var r,a=t(30168),l=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  margin-bottom: 16px;\n\n  .ant-btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"])));e.Z=l}}]);