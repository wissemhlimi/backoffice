"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[1352],{47849:function(e,n,r){var t=r(76747),i=r(86495),a=r(26319),l=r(71945),o=(0,t.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(l.Z.values.cibleRevendicationRead)})),u=(0,t.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(l.Z.values.cibleRevendicationEdit)})),s=(0,t.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(l.Z.values.cibleRevendicationCreate)})),c=(0,t.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(l.Z.values.cibleRevendicationImport)})),d={selectPermissionToRead:o,selectPermissionToEdit:u,selectPermissionToCreate:s,selectPermissionToDestroy:(0,t.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(l.Z.values.cibleRevendicationDestroy)})),selectPermissionToImport:c};n.Z=d},89994:function(e,n,r){var t=r(93433),i=r(6473),a=r(10499),l=r(70816),o=r.n(l),u={generic:function(e){return i.nK().label(e)},string:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),n.matches&&(r=r.matches(n.matches)),r},boolean:function(e,n){return i.Xg().default(!1).label(e)},relationToOne:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).transform((function(e,n){return n?n.id:null}));return n.required&&(r=r.required()),r},stringArray:function(e,n){n=n||{};var r=i.IX().compact().ensure().of(i.Z_().transform((function(e,n){return""===n?null:e})).trim()).label(e);return n.required&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},relationToMany:function(e,n){n=n||{};var r=i.IX().nullable(!0).label(e).transform((function(e,n){return n&&n.length?n.map((function(e){return e.id})):[]}));return n.required&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},integer:function(e,n){n=n||{};var r=i.Rx().transform((function(e,n){return""===n?null:e})).integer().nullable(!0).label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),r},images:function(e,n){n=n||{};var r=i.IX().nullable(!0).label(e);return(n.required||n.min)&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},files:function(e,n){n=n||{};var r=i.IX().compact().ensure().nullable(!0).label(e);return(n.required||n.min)&&(r=r.required()),n.min||0===n.min?r=r.min(n.min):n.required&&(r=r.min(1)),n.max&&(r=r.max(n.max)),r},enumerator:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).label(e).nullable(!0).oneOf([null].concat((0,t.Z)(n.options||[])));return n.required&&(r=r.required((0,a.ag)("validation.string.selected"))),r},email:function(e,n){n=n||{};var r=i.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e).email();return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),n.matches&&(r=r.matches(n.matches)),r},decimal:function(e,n){n=n||{};var r=i.Rx().transform((function(e,n){return""===n?null:e})).nullable(!0).label(e);return n.required&&(r=r.required()),(n.min||0===n.min)&&(r=r.min(n.min)),n.max&&(r=r.max(n.max)),r},datetime:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).transform((function(e,n){return e?o()(n,"YYYY-MM-DD HH:mm").toISOString():null}));return n.required&&(r=r.required()),r},date:function(e,n){n=n||{};var r=i.nK().nullable(!0).label(e).test("is-date",(0,a.ag)("validation.mixed.default"),(function(e){return!e||o()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?o()(e).format("YYYY-MM-DD"):null}));return n.required&&(r=r.required()),r}};n.Z=u},33957:function(e,n,r){r.d(n,{Z:function(){return R}});var t=r(1413),i=r(45987),a=r(93433),l=r(29439),o=r(47313),u=r(51175),s=r(74165),c=r(15861),d=r(48216),m=r(10499),f=r(2384),v=r(33512),p=r(46417),b=function(e){var n=(0,o.useState)(!1),r=(0,l.Z)(n,2),t=r[0],i=r[1],a=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(r,t){var a,l,o;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(!0),n.next=4,u.Z.create(t);case 4:return a=n.sent,l=a.id,n.next=8,u.Z.find(l);case 8:o=n.sent,e.onSuccess(o),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),v.Z.handle(n.t0);case 15:return n.prev=15,i(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e,r){return n.apply(this,arguments)}}();return e.visible?(0,p.jsx)(d.Z,{style:{top:24},title:(0,m.ag)("entities.cibleRevendication.new.title"),visible:e.visible,onCancel:function(){return e.onCancel()},footer:!1,width:"80%",children:(0,p.jsx)(f.Z,{saveLoading:t,onSubmit:a,onCancel:e.onCancel,modal:!0})}):null},h=r(51552),Z=r(45788),x=r(47849),g=r(43270),y=["form"],R=function(e){var n=(0,o.useState)(!1),r=(0,l.Z)(n,2),s=r[0],c=r[1],d=(0,g.Gc)(),m=d.setValue,f=d.getValues,v=(0,Z.v9)(x.Z.selectPermissionToCreate),R=function(){c(!1)},C=(e.form,(0,i.Z)(e,y));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.Z,(0,t.Z)((0,t.Z)({},C),{},{fetchFn:function(e,n){return u.Z.listAutocomplete(e,n)},mapper:{toAutocomplete:function(e){if(!e)return null;var n=e.id,r=e.label;return(e.nameFR||e.nameAR)&&(r="".concat(e.nameFR," / ").concat(e.nameAR)),{key:n,label:r}},toValue:function(e){return e?{id:e.key,label:e.label}:null}},onOpenModal:function(){c(!0)},inMemoryFilter:!0,hasPermissionToCreate:v})),(0,p.jsx)(b,{visible:s,onCancel:R,onSuccess:function(n){var r=e.name,t=e.mode;m(r,t&&"multiple"===t?[].concat((0,a.Z)(f()[r]||[]),[n]):n,{shouldValidate:!0,shouldDirty:!0}),R()}})]})}},2384:function(e,n,r){var t=r(1413),i=r(29439),a=r(92350),l=r(12196),o=r(11829),u=r(73591),s=r(68197),c=r(59624),d=r(59420),m=r(96995),f=r(59491),v=r(43270),p=r(47313),b=r(10499),h=r(68160),Z=r(6473),x=r(89994),g=r(67357),y=r(56148),R=r(33957),C=r(75352),j=r(46417),q=u.Z.TabPane,w=Z.Ry().shape({nameFR:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.nameFR"),{}),nameEN:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.nameEN"),{}),nameAR:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.nameAR"),{required:!0}),abbrevFR:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.abbrevFR"),{}),abbrevEN:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.abbrevEN"),{}),abbrevAR:x.Z.string((0,b.ag)("entities.cibleRevendication.fields.abbrevAR"),{}),parent:x.Z.relationToOne((0,b.ag)("entities.cibleRevendication.fields.parent"),{})});n.Z=function(e){var n=(0,p.useState)((function(){var n=e.record||{};return{nameFR:n.nameFR,nameEN:n.nameEN,nameAR:n.nameAR,abbrevFR:n.abbrevFR,abbrevEN:n.abbrevEN,abbrevAR:n.abbrevAR,parent:n.parent}})),r=(0,i.Z)(n,1)[0],Z=(0,v.cI)({resolver:(0,g.X)(w),mode:"all",defaultValues:r}),x=function(n){var r;e.onSubmit(null===e||void 0===e||null===(r=e.record)||void 0===r?void 0:r.id,n)},F=e.saveLoading;return(0,j.jsx)(h.ZP,{children:(0,j.jsx)(v.RV,(0,t.Z)((0,t.Z)({},Z),{},{children:(0,j.jsxs)("form",{onSubmit:Z.handleSubmit(x),children:[(0,j.jsxs)(s.Z,{gutter:24,children:[(0,j.jsx)(c.Z,{span:16,children:(0,j.jsx)(C.Z,{children:e.title})}),(0,j.jsx)(c.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,j.jsxs)(d.Z.Item,(0,t.Z)((0,t.Z)({className:"form-buttons"},h.YT),{},{children:[(0,j.jsx)(m.Z,{title:(0,b.ag)("common.save"),children:(0,j.jsx)(f.Z,{loading:F,type:"primary",onClick:Z.handleSubmit(x),icon:(0,j.jsx)(a.Z,{rev:void 0})})}),(0,j.jsx)(m.Z,{title:(0,b.ag)("common.reset"),children:(0,j.jsx)(f.Z,{disabled:F,onClick:function(){Object.keys(r).forEach((function(e){Z.setValue(e,r[e])}))},icon:(0,j.jsx)(l.Z,{rev:void 0})})}),e.onCancel&&(0,j.jsx)(m.Z,{title:(0,b.ag)("common.cancel"),children:(0,j.jsx)(f.Z,{disabled:F,onClick:function(){return e.onCancel()},icon:(0,j.jsx)(o.Z,{rev:void 0})})})]}))})]}),(0,j.jsx)(s.Z,{gutter:24,children:(0,j.jsx)(c.Z,{span:24,children:(0,j.jsxs)(u.Z,{defaultActiveKey:"1",onChange:function(e){},children:[(0,j.jsx)(q,{tab:(0,b.ag)("common.informationsAR"),children:(0,j.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,j.jsx)(y.Z,{name:"nameAR",label:(0,b.ag)("entities.cibleRevendication.fields.nameAR"),required:!0,layout:h.I4}),(0,j.jsx)(y.Z,{name:"abbrevAR",label:(0,b.ag)("entities.cibleRevendication.fields.abbrevAR"),required:!0,layout:h.I4}),(0,j.jsx)(R.Z,{name:"parent",label:(0,b.ag)("entities.cibleRevendication.fields.parent"),required:!1,showCreate:!e.modal,layout:h.I4})]})},"1"),(0,j.jsx)(q,{tab:(0,b.ag)("common.informationsFR"),children:(0,j.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,j.jsx)(y.Z,{name:"nameFR",label:(0,b.ag)("entities.cibleRevendication.fields.nameFR"),required:!1,layout:h.I4,autoFocus:!0}),(0,j.jsx)(y.Z,{name:"abbrevFR",label:(0,b.ag)("entities.cibleRevendication.fields.abbrevFR"),required:!1,layout:h.I4})]})},"2"),(0,j.jsx)(q,{tab:(0,b.ag)("common.informationsEN"),children:(0,j.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,j.jsx)(y.Z,{name:"nameEN",label:(0,b.ag)("entities.cibleRevendication.fields.nameEN"),required:!1,layout:h.I4}),(0,j.jsx)(y.Z,{name:"abbrevEN",label:(0,b.ag)("entities.cibleRevendication.fields.abbrevEN"),required:!1,layout:h.I4})]})},"3")]})})})]})}))})}},27829:function(e,n,r){var t,i=r(30168),a=r(44781).ZP.div(t||(t=(0,i.Z)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));n.Z=a},53852:function(e,n,r){var t=r(28709),i=(r(47313),r(28303)),a=r(46417);n.Z=function(e){var n=function(e){return e.length>1};return(0,a.jsx)(t.Z,{children:e.items.map((function(e){return(0,a.jsx)(t.Z.Item,{children:n(e)?(0,a.jsx)(i.rU,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},49384:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(15671),i=r(43144),a=function(){function e(){(0,t.Z)(this,e)}return(0,i.Z)(e,null,[{key:"errorMessage",value:function(e,n,r,t){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(a)return a;if(!t&&!r[e])return null;var l=n[e];return(null===l||void 0===l||null===(i=l[0])||void 0===i?void 0:i.message)||(null===l||void 0===l?void 0:l.message)||l||null}}]),e}()},51552:function(e,n,r){var t=r(1413),i=r(74165),a=r(15861),l=r(29439),o=r(82138),u=r(61143),s=r(59420),c=r(59491),d=r(65375),m=r.n(d),f=r(47313),v=r(10499),p=r(49384),b=r(65237),h=r(43270),Z=r(46417),x=function(e){var n=(0,h.Gc)(),r=n.errors,d=n.watch,x=n.setValue,g=n.register,y=n.formState,R=y.touched,C=y.isSubmitted,j=e.label,q=e.name,w=e.hint,F=e.layout,k=e.size,A=e.placeholder,S=e.autoFocus,I=e.externalErrorMessage,T=e.defaultActiveFirstOption,E=e.allowClear,P=e.mode,M=e.required,V=e.fetchFn,N=e.mapper,D=d(q);(0,f.useEffect)((function(){g({name:q})}),[g,q]);var Y=(0,f.useState)([]),O=(0,l.Z)(Y,2),L=O[0],B=O[1],_=(0,f.useState)([]),U=(0,l.Z)(_,2),X=U[0],z=U[1],K=(0,f.useState)([]),G=(0,l.Z)(K,2),W=G[0],H=G[1],J=(0,f.useState)(!1),Q=(0,l.Z)(J,2),$=Q[0],ee=Q[1],ne=(0,f.useRef)("NOT_INITIALIZED");(0,f.useEffect)((function(){re()}),[D]),(0,f.useEffect)((function(){ue("")}),[]);var re=function(){if(D){var e=("multiple"===P?D:[D])||[];e=e.filter(Boolean).map(N.toAutocomplete).map((function(e){return{id:e.key,label:e.label}})),z((function(n){return m()(n,e,"id")})),B((function(n){return m()(n,e,"id")}))}},te=e.inMemoryFilter?X:L,ie=function(e){return(te||[]).find((function(n){return n.id===e.key}))||e},ae="multiple"===P?D?D.map((function(e){return N.toAutocomplete(ie(e))})):[]:function(){if(D)return N.toAutocomplete(ie(D))}(),le=function(n){if(!n)return x(q,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var r=n.map((function(e){return N.toValue(e)}));x(q,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},oe=function(n){if(!n)return x(q,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var r=N.toValue(n);x(q,r,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(r)},ue=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.inMemoryFilter){n.next=2;break}return n.abrupt("return",se(r));case 2:return n.abrupt("return",de(r));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=W)&&r.length){e.next=5;break}return e.next=4,ce();case 4:r=e.sent;case 5:z(r.filter((function(e){return String(e.label||"").toLowerCase().includes(String(n||"").toLowerCase())}))),ee(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,V();case 4:return n=e.sent,H(n),ee(!1),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),H([]),ee(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==ne.current){e.next=2;break}return e.abrupt("return");case 2:return ne.current=n,ee(!0),e.prev=4,e.next=7,V(n,100);case 7:r=e.sent,ne.current===n&&(ee(!1),B(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),ne.current===n&&(ee(!1),B([]));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n){return e.apply(this,arguments)}}(),me=(0,b.Z)(ue,300);(0,f.useEffect)((function(){return function(){me.flush()}}),[me]);var fe=te.filter((function(e){return Boolean(e.id)})).map((function(e){return(0,Z.jsx)(u.Z.Option,{value:e.id,children:e.label},e.id)})),ve=p.Z.errorMessage(q,r,R,C,I);return(0,Z.jsx)(s.Z.Item,(0,t.Z)((0,t.Z)({},F),{},{label:j,required:M,validateStatus:ve?"error":"success",help:$?(0,v.ag)("autocomplete.loading"):ve||w,children:(0,Z.jsxs)("div",{style:{display:"flex"},children:[(0,Z.jsx)(u.Z,{id:q,showSearch:!0,mode:P,labelInValue:!0,showArrow:!1,filterOption:!1,notFoundContent:null,onChange:function(e){return"multiple"===P?le(e):oe(e)},onBlur:function(n){e.onBlur&&e.onBlur(n)},value:ae,onSearch:me.callback,placeholder:A||void 0,size:k||void 0,autoFocus:S||!1,defaultActiveFirstOption:T,allowClear:E,children:fe}),e.showCreate&&e.hasPermissionToCreate?(0,Z.jsx)(c.Z,{style:{marginLeft:"16px",flexShrink:0},type:"primary",icon:(0,Z.jsx)(o.Z,{rev:void 0}),onClick:e.onOpenModal,htmlType:"button"}):null]})}))};x.defaultProps={layout:null,defaultActiveFirstOption:!0,allowClear:!0,mode:"default",required:!1,inMemoryFilter:!1},n.Z=x},56148:function(e,n,r){var t=r(1413),i=r(59420),a=r(46937),l=r(43270),o=r(47313),u=r(49384),s=r(46417),c=function(e){var n=e.label,r=e.name,c=e.hint,d=e.layout,m=e.size,f=e.type,v=e.placeholder,p=e.autoFocus,b=e.autoComplete,h=e.prefix,Z=e.externalErrorMessage,x=e.required,g=e.addonAfter,y=e.maxLength,R=(0,l.Gc)(),C=R.setValue,j=R.watch,q=R.register,w=R.errors,F=R.formState,k=F.touched,A=F.isSubmitted;(0,o.useEffect)((function(){q({name:r})}),[q,r]);var S=u.Z.errorMessage(r,w,k,A,Z);return(0,s.jsx)(i.Z.Item,(0,t.Z)((0,t.Z)({},d),{},{label:n,required:x,validateStatus:S?"error":"success",help:S||c,children:(0,s.jsx)(a.Z,{maxLength:y,id:r,name:r,type:f,value:j(r),onChange:function(n){C(r,n.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},size:m||void 0,placeholder:v||void 0,autoFocus:p||!1,autoComplete:b||void 0,prefix:h||void 0,addonAfter:g||void 0,style:{width:"100%"}})}))};c.defaultProps={layout:null,type:"text",required:!1},n.Z=c},68160:function(e,n,r){r.d(n,{I4:function(){return l},YT:function(){return o}});var t,i=r(30168),a=r(44781).ZP.div(t||(t=(0,i.Z)(["\n  // padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-form-item-with-help {\n    margin-bottom: 24px;\n  }\n\n  .form-buttons {\n    .ant-btn {\n      margin-top: 8px;\n      margin-right: 8px;\n    }\n  }\n\n  // input {\n  //  font-variant: tabular-nums;\n  //   list-style: none;\n  //   font-feature-settings: 'tnum';\n  //   position: relative;\n  //   display: inline-block;\n  //   width: 100%;\n  //   min-width: 0;\n  //   padding: 4px 11px;\n  //   color: rgba(0, 0, 0, 0.65);\n  //   font-size: 14px;\n  //   line-height: 1.5715;\n  //   background-color: #fff;\n  //   background-image: none;\n  //   border: 1px solid #d9d9d9;\n  //   border-radius: 4px;\n  //   transition: all 0.3s;\n  // }\n"]))),l={labelCol:{xs:{span:24},sm:{span:24},md:{span:6},lg:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:18},lg:{span:12}}},o={wrapperCol:{md:{span:18,offset:6},lg:{span:12,offset:4}}};n.ZP=a},75352:function(e,n,r){var t,i=r(30168),a=r(44781).ZP.h1(t||(t=(0,i.Z)(["\n  margin-bottom: 36px;\n"])));n.Z=a}}]);