"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[8914],{89994:function(e,n,t){var r=t(93433),a=t(6473),i=t(10499),l=t(70816),o=t.n(l),u={generic:function(e){return a.nK().label(e)},string:function(e,n){n=n||{};var t=a.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},boolean:function(e,n){return a.Xg().default(!1).label(e)},relationToOne:function(e,n){n=n||{};var t=a.nK().nullable(!0).label(e).transform((function(e,n){return n?n.id:null}));return n.required&&(t=t.required()),t},stringArray:function(e,n){n=n||{};var t=a.IX().compact().ensure().of(a.Z_().transform((function(e,n){return""===n?null:e})).trim()).label(e);return n.required&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},relationToMany:function(e,n){n=n||{};var t=a.IX().nullable(!0).label(e).transform((function(e,n){return n&&n.length?n.map((function(e){return e.id})):[]}));return n.required&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},integer:function(e,n){n=n||{};var t=a.Rx().transform((function(e,n){return""===n?null:e})).integer().nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},images:function(e,n){n=n||{};var t=a.IX().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},files:function(e,n){n=n||{};var t=a.IX().compact().ensure().nullable(!0).label(e);return(n.required||n.min)&&(t=t.required()),n.min||0===n.min?t=t.min(n.min):n.required&&(t=t.min(1)),n.max&&(t=t.max(n.max)),t},enumerator:function(e,n){n=n||{};var t=a.Z_().transform((function(e,n){return""===n?null:e})).label(e).nullable(!0).oneOf([null].concat((0,r.Z)(n.options||[])));return n.required&&(t=t.required((0,i.ag)("validation.string.selected"))),t},email:function(e,n){n=n||{};var t=a.Z_().transform((function(e,n){return""===n?null:e})).nullable(!0).trim().label(e).email();return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),n.matches&&(t=t.matches(n.matches)),t},decimal:function(e,n){n=n||{};var t=a.Rx().transform((function(e,n){return""===n?null:e})).nullable(!0).label(e);return n.required&&(t=t.required()),(n.min||0===n.min)&&(t=t.min(n.min)),n.max&&(t=t.max(n.max)),t},datetime:function(e,n){n=n||{};var t=a.nK().nullable(!0).label(e).transform((function(e,n){return e?o()(n,"YYYY-MM-DD HH:mm").toISOString():null}));return n.required&&(t=t.required()),t},date:function(e,n){n=n||{};var t=a.nK().nullable(!0).label(e).test("is-date",(0,i.ag)("validation.mixed.default"),(function(e){return!e||o()(e,"YYYY-MM-DD").isValid()})).transform((function(e){return e?o()(e).format("YYYY-MM-DD"):null}));return n.required&&(t=t.required()),t}};n.Z=u},98040:function(e,n,t){var r=t(76747),a=function(e){return e.tenant.form},i=(0,r.P1)([a],(function(e){return e.record})),l={selectInitLoading:(0,r.P1)([a],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,r.P1)([a],(function(e){return Boolean(e.saveLoading)})),selectRecord:i,selectRaw:a};n.Z=l},44460:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(29439),a=t(47313),i=t(45788),l=t(10499),o=t(926),u=t(86495),d=t(32377),c=t(37078),s=t(11581),m=t(94827),f=t(1413),g=t(51853),h=t(98040),v=t(56148),p=t(43270),x=t(59491),b=t(89994),Z=t(6473),y=t(86430);var w=t(1354),j=t(67357),q=t(46417),k=Z.Ry().shape({name:b.Z.string((0,l.ag)("tenant.fields.tenantName"),{required:!0,max:50}),url:b.Z.string((0,l.ag)("tenant.fields.tenantUrl"),{required:!0,max:50}).matches(/^[a-z0-9][-a-zA-Z0-9]*$/,(0,l.ag)("tenant.validation.url"))}),M=Z.Ry().shape({name:b.Z.string((0,l.ag)("tenant.fields.tenantName"),{required:!0,max:50})}),S=w.w.isEnabled?k:M;var I=function(e){var n=(0,i.I0)(),t=(0,a.useState)({name:""}),o=(0,r.Z)(t,1)[0],d=(0,p.cI)({resolver:(0,j.X)(S),mode:"onSubmit",defaultValues:o}),c=(0,i.v9)(h.Z.selectSaveLoading),s=(0,i.v9)(u.Z.selectInvitedTenants);return(0,q.jsx)(p.RV,(0,f.Z)((0,f.Z)({},d),{},{children:(0,q.jsxs)("form",{onSubmit:d.handleSubmit((function(e){n(g.Z.doCreate(e))})),children:[(0,q.jsx)(v.Z,{name:"name",placeholder:(0,l.ag)("tenant.fields.tenantName"),autoComplete:"name",size:"large",layout:null,onChange:function(e){return d.setValue("url",e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"))},autoFocus:!0}),w.w.isEnabled&&(0,q.jsx)(v.Z,{name:"url",placeholder:(0,l.ag)("tenant.fields.tenantUrl"),size:"large",layout:null,addonAfter:(0,q.jsxs)("span",{style:{fontWeight:"bold"},children:[".",y.Z.frontendUrl.host]})}),(0,q.jsx)(x.Z,{style:{marginTop:"16px"},type:"primary",htmlType:"submit",block:!0,size:"large",loading:c,children:(0,l.ag)("tenant.create.button")}),Boolean(s.length)&&(0,q.jsx)(x.Z,{style:{marginTop:"16px"},htmlType:"button",block:!0,size:"large",onClick:e.onViewToggle,children:(0,l.ag)("tenant.invitation.view")})]})}))},P=t(28769),C=t(10546),z=t(5544),T=Z.Ry().shape({id:b.Z.string((0,l.ag)("tenant.fields.tenantId"))});var O=function(e){var n=(0,i.I0)(),t=(0,i.v9)(C.Z.selectLoading),o=(0,i.v9)(u.Z.selectInvitedTenants),d=(0,i.v9)(u.Z.selectCurrentUser),c=(0,a.useState)({id:o[0].id}),s=(0,r.Z)(c,1)[0],m=(0,p.cI)({resolver:(0,j.X)(T),mode:"onSubmit",defaultValues:s});return(0,q.jsx)(p.RV,(0,f.Z)((0,f.Z)({},m),{},{children:(0,q.jsxs)("form",{onSubmit:m.handleSubmit((function(e){var t=e.id,r=d.tenants.find((function(e){return e.tenant.id===t}));n(P.Z.doAccept(r.invitationToken))})),children:[(0,q.jsx)(z.Z,{name:"id",placeholder:(0,l.ag)("tenant.fields.tenantId"),size:"large",options:o.map((function(e){return{value:e.id,label:e.name}})),layout:null}),(0,q.jsx)(x.Z,{style:{marginTop:"16px"},type:"primary",htmlType:"submit",block:!0,size:"large",loading:t,children:(0,l.ag)("tenant.invitation.accept")}),(0,q.jsx)(x.Z,{style:{marginTop:"16px"},htmlType:"button",block:!0,size:"large",onClick:e.onViewToggle,children:(0,l.ag)("tenant.new.title")})]})}))},_=t(82509);var V=function(){var e=(0,a.useState)("form"),n=(0,r.Z)(e,2),t=n[0],f=n[1],g=(0,i.I0)(),h=(0,i.v9)(u.Z.selectInvitedTenants),v=(0,i.v9)(u.Z.selectBackgroundImageUrl),p=(0,i.v9)(u.Z.selectLogoUrl);(0,a.useEffect)((function(){f(h.length?"select":"form")}),[h]);var x=function(){f((function(e){return"form"===e?"select":"form"}))};return(0,q.jsx)(m.Z,{style:{backgroundImage:"url(".concat(v||"/images/tenant.jpg",")")},children:(0,q.jsxs)(d.Z,{children:[(0,q.jsx)(c.Z,{children:p?(0,q.jsx)("img",{src:p,width:"240px",alt:(0,l.ag)("app.title")}):(0,q.jsx)("h1",{children:(0,l.ag)("app.title")})}),"form"===t?(0,q.jsx)(I,{onViewToggle:x}):(0,q.jsx)(O,{onViewToggle:x}),(0,q.jsx)(s.Z,{children:(0,q.jsx)(_.Z,{onClick:function(){g(o.Z.doSignout())},children:(0,l.ag)("auth.signout")})})]})})}},32377:function(e,n,t){var r,a=t(30168),i=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  width: 500px;\n  height: 100%;\n  min-height: 100%;\n  overflow-y: auto;\n  z-index: 1;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 56px 40px;\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    color: white;\n  }\n\n  .ant-checkbox-wrapper {\n    color: white;\n  }\n\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n  }\n"])));n.Z=i},37078:function(e,n,t){var r,a=t(30168),i=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 48px;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  color: white;\n\n  h1 {\n    margin-bottom: 0;\n  }\n"])));n.Z=i},11581:function(e,n,t){var r,a=t(30168),i=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 36px;\n  text-align: center;\n"])));n.Z=i},94827:function(e,n,t){var r,a=t(30168),i=t(44781).ZP.div(r||(r=(0,a.Z)(["\n  width: 100%;\n  min-height: 100vh;\n  height: 100vh;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  background-size: cover;\n\n  &:before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.5);\n    position: absolute;\n    z-index: 1;\n    top: 0;\n  }\n"])));n.Z=i},49384:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(15671),a=t(43144),i=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,null,[{key:"errorMessage",value:function(e,n,t,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!r&&!t[e])return null;var l=n[e];return(null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.message)||(null===l||void 0===l?void 0:l.message)||l||null}}]),e}()},56148:function(e,n,t){var r=t(1413),a=t(59420),i=t(46937),l=t(43270),o=t(47313),u=t(49384),d=t(46417),c=function(e){var n=e.label,t=e.name,c=e.hint,s=e.layout,m=e.size,f=e.type,g=e.placeholder,h=e.autoFocus,v=e.autoComplete,p=e.prefix,x=e.externalErrorMessage,b=e.required,Z=e.addonAfter,y=e.maxLength,w=(0,l.Gc)(),j=w.setValue,q=w.watch,k=w.register,M=w.errors,S=w.formState,I=S.touched,P=S.isSubmitted;(0,o.useEffect)((function(){k({name:t})}),[k,t]);var C=u.Z.errorMessage(t,M,I,P,x);return(0,d.jsx)(a.Z.Item,(0,r.Z)((0,r.Z)({},s),{},{label:n,required:b,validateStatus:C?"error":"success",help:C||c,children:(0,d.jsx)(i.Z,{maxLength:y,id:t,name:t,type:f,value:q(t),onChange:function(n){j(t,n.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.target.value)},onBlur:function(n){e.onBlur&&e.onBlur(n)},size:m||void 0,placeholder:g||void 0,autoFocus:h||!1,autoComplete:v||void 0,prefix:p||void 0,addonAfter:Z||void 0,style:{width:"100%"}})}))};c.defaultProps={layout:null,type:"text",required:!1},n.Z=c},5544:function(e,n,t){var r=t(1413),a=t(59420),i=t(61143),l=t(47313),o=t(49384),u=t(43270),d=t(46417),c=function(e){var n=e.label,t=e.name,c=e.hint,s=e.layout,m=e.size,f=e.placeholder,g=e.options,h=e.mode,v=e.autoFocus,p=e.required,x=e.externalErrorMessage,b=e.optionFilterProp,Z=(0,u.Gc)(),y=Z.register,w=Z.errors,j=Z.formState,q=j.touched,k=j.isSubmitted,M=Z.setValue,S=Z.watch,I=o.Z.errorMessage(t,w,q,k,x),P=S(t);return(0,l.useEffect)((function(){y({name:t})}),[y,t]),(0,d.jsx)(a.Z.Item,(0,r.Z)((0,r.Z)({},s),{},{label:n,validateStatus:I?"error":"success",required:p,help:I||c,children:(0,d.jsx)(i.Z,{id:t,onChange:function(n){M(t,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},onBlur:function(n){e.onBlur&&e.onBlur(n)},value:P,size:m||void 0,placeholder:f||void 0,autoFocus:v||!1,mode:h||void 0,optionFilterProp:b||"children",allowClear:!0,style:{width:"100%"},children:g.map((function(e){return(0,d.jsx)(i.Z.Option,{value:e.value,title:e.title,children:e.label},e.value)}))})}))};c.defaultProps={layout:null,required:!1},n.Z=c},82509:function(e,n,t){var r,a=t(30168),i=t(44781).ZP.button(r||(r=(0,a.Z)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  color: var(--link-color);\n  text-decoration: none;\n  display: inline;\n  margin: 0;\n  padding: 0;\n\n  &:hover {\n    text-decoration: none;\n  }\n  &:focus {\n    text-decoration: none;\n  }\n"])));n.Z=i},92207:function(e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},67669:function(e,n,t){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(r=t(58957))&&r.__esModule?r:{default:r};n.default=a,e.exports=a},58957:function(e,n,t){var r=t(64836),a=t(18698);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t(42122)),l=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,t&&t.set(e,r);return r}(t(47313)),o=r(t(92207)),u=r(t(17830));function d(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)}var c=function(e,n){return l.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:n,icon:o.default}))};c.displayName="DownOutlined";var s=l.forwardRef(c);n.default=s}}]);