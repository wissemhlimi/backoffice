"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[1087],{31505:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var i=n(29439),a=n(47313),o=n(45788),r=n(63830),s=n(10499),d=n(287),u=n(76747),l=function(e){return e.demandeAppui.form},p=(0,u.P1)([l],(function(e){return e.record})),c={selectInitLoading:(0,u.P1)([l],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:(0,u.P1)([l],(function(e){return Boolean(e.saveLoading)})),selectRecord:p,selectRaw:l},m=n(37670),f=n(1413),g=n(92350),Z=n(12196),h=n(11829),v=n(73591),x=n(68197),b=n(59624),j=n(59420),y=n(96995),A=n(59491),q=n(43270),C=n(68160),I=n(6473),R=n(89994),E=n(67357),N=n(30513),S=n(5544),w=n(26334),L=n(96111),k=n(87347),F=n(75352),P=n(14184),B=n(59961),V=n(56148),T=n(46417),W=v.Z.TabPane,M=I.Ry().shape({type:R.Z.enumerator((0,s.ag)("entities.demandeAppui.fields.type"),{required:!0,options:w.Z.type}),personne:R.Z.enumerator((0,s.ag)("entities.demandeAppui.fields.personne"),{required:!0,options:w.Z.personne}),etat:R.Z.enumerator((0,s.ag)("entities.demandeAppui.fields.etat"),{required:!0,options:w.Z.etat}),gouvernorat:R.Z.enumerator((0,s.ag)("entities.demandeAppui.fields.gouvernorat"),{required:!0,options:w.Z.gouvernorat}),importance:R.Z.enumerator((0,s.ag)("entities.demandeAppui.fields.importance"),{required:!0,options:w.Z.importance}),email:R.Z.string((0,s.ag)("entities.demandeAppui.fields.email"),{}),phoneNumber:R.Z.string((0,s.ag)("entities.demandeAppui.fields.phoneNumber"),{matches:/^[0-9]/,max:8,min:8}),descriptionFR:R.Z.string((0,s.ag)("entities.demandeAppui.fields.description"),{}),descriptionAR:R.Z.string((0,s.ag)("entities.demandeAppui.fields.description"),{}),descriptionEN:R.Z.string((0,s.ag)("entities.demandeAppui.fields.description"),{}),supports:R.Z.files((0,s.ag)("entities.demandeAppui.fields.supports"),{}),category:R.Z.relationToOne((0,s.ag)("entities.demandeAppui.fields.categorie"),{required:!0}),statut:R.Z.enumerator((0,s.ag)("entities.publication.fields.statut"),{required:!0,options:w.Z.statut})}),O=function(e){var t=(0,a.useState)((function(){var t=e.record||{};return{type:t.type,personne:t.personne,email:t.email,phoneNumber:t.phoneNumber,etat:t.etat,gouvernorat:t.gouvernorat,category:t.category,importance:t.importance,descriptionFR:t.descriptionFR,descriptionAR:t.descriptionAR,descriptionEN:t.descriptionEN,supports:t.supports||[],statut:t.statut}})),n=(0,i.Z)(t,1)[0],o=(0,q.cI)({resolver:(0,E.X)(M),mode:"all",defaultValues:n}),r=function(t){var n;e.onSubmit(null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.id,t)},d=e.saveLoading;return(0,T.jsx)(C.ZP,{children:(0,T.jsx)(q.RV,(0,f.Z)((0,f.Z)({},o),{},{children:(0,T.jsxs)("form",{onSubmit:o.handleSubmit(r),children:[(0,T.jsxs)(x.Z,{gutter:24,children:[(0,T.jsx)(b.Z,{span:16,children:(0,T.jsx)(F.Z,{children:e.title})}),(0,T.jsx)(b.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,T.jsxs)(j.Z.Item,(0,f.Z)((0,f.Z)({className:"form-buttons"},C.YT),{},{children:[(0,T.jsx)(y.Z,{title:(0,s.ag)("common.save"),children:(0,T.jsx)(A.Z,{loading:d,type:"primary",onClick:o.handleSubmit(r),icon:(0,T.jsx)(g.Z,{rev:void 0})})}),(0,T.jsx)(y.Z,{title:(0,s.ag)("common.reset"),children:(0,T.jsx)(A.Z,{disabled:d,onClick:function(){Object.keys(n).forEach((function(e){o.setValue(e,n[e])}))},icon:(0,T.jsx)(Z.Z,{rev:void 0})})}),e.onCancel&&(0,T.jsx)(y.Z,{title:(0,s.ag)("common.cancel"),children:(0,T.jsx)(A.Z,{disabled:d,onClick:function(){return e.onCancel()},icon:(0,T.jsx)(h.Z,{rev:void 0})})})]}))})]}),(0,T.jsxs)(v.Z,{defaultActiveKey:"1",onChange:function(e){},children:[(0,T.jsx)(W,{tab:(0,s.ag)("common.informations"),children:(0,T.jsxs)("fieldset",{children:[(0,T.jsxs)("legend",{children:["\xa0 \xa0"," ",(0,s.ag)("common.informations")]}),(0,T.jsx)(S.Z,{name:"statut",label:(0,s.ag)("entities.publication.fields.statut"),options:w.Z.statut.map((function(e){return{value:e,label:(0,s.ag)("entities.publication.enumerators.statut.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(S.Z,{name:"type",label:(0,s.ag)("entities.demandeAppui.fields.type"),options:w.Z.type.map((function(e){return{value:e,label:(0,s.ag)("entities.demandeAppui.enumerators.type.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(B.Z,{name:"personne",label:(0,s.ag)("entities.demandeAppui.fields.personne"),options:w.Z.personne.map((function(e){return{value:e,label:(0,s.ag)("entities.demandeAppui.enumerators.personne.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(S.Z,{name:"etat",label:(0,s.ag)("entities.demandeAppui.fields.etat"),options:w.Z.etat.map((function(e){return{value:e,label:(0,s.ag)("entities.demandeAppui.enumerators.etat.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(S.Z,{name:"gouvernorat",label:(0,s.ag)("entities.demandeAppui.fields.gouvernorat"),options:w.Z.gouvernorat.map((function(e){return{value:e,label:(0,s.ag)("entities.demandeAppui.enumerators.gouvernorat.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(P.Z,{name:"category",label:(0,s.ag)("entities.demandeAppui.fields.categorie"),required:!1,showCreate:!e.modal,layout:C.I4}),(0,T.jsx)(S.Z,{name:"importance",label:(0,s.ag)("entities.demandeAppui.fields.importance"),options:w.Z.importance.map((function(e){return{value:e,label:(0,s.ag)("entities.demandeAppui.enumerators.importance.".concat(e))}})),required:!0,layout:C.I4}),(0,T.jsx)(V.Z,{name:"email",label:(0,s.ag)("entities.demandeAppui.fields.email"),autoComplete:"email",layout:C.I4,autoFocus:!0}),(0,T.jsx)(V.Z,{name:"phoneNumber",label:(0,s.ag)("user.fields.phoneNumber"),autoComplete:"phoneNumber",layout:C.I4}),(0,T.jsx)(N.Z,{name:"descriptionAR",label:(0,s.ag)("entities.demandeAppui.fields.description"),required:!1,layout:C.I4}),(0,T.jsx)(k.Z,{name:"supports",label:(0,s.ag)("entities.demandeAppui.fields.supports"),required:!1,storage:L.Z.values.demandeAppuiSupports,max:void 0,formats:void 0,layout:C.I4})]})},"1"),(0,T.jsx)(W,{tab:(0,s.ag)("common.informationsFR"),children:(0,T.jsxs)("fieldset",{children:[(0,T.jsxs)("legend",{children:["\xa0 \xa0",(0,s.ag)("common.informationsFR")]}),(0,T.jsx)(N.Z,{name:"descriptionFR",label:(0,s.ag)("entities.demandeAppui.fields.description"),required:!1,layout:C.I4})]})},"2"),(0,T.jsx)(W,{tab:(0,s.ag)("common.informationsEN"),children:(0,T.jsxs)("fieldset",{children:[(0,T.jsxs)("legend",{children:["\xa0 \xa0",(0,s.ag)("common.informationsEN")]}),(0,T.jsx)(N.Z,{name:"descriptionEN",label:(0,s.ag)("entities.demandeAppui.fields.description"),required:!1,layout:C.I4})]})},"3")]})]})}))})},_=n(27829),D=n(53852),G=n(61567),K=function(e){var t=(0,a.useState)(!1),n=(0,i.Z)(t,2),u=n[0],l=n[1],p=(0,o.I0)(),f=(0,r.$B)(),g=(0,o.v9)(c.selectInitLoading),Z=(0,o.v9)(c.selectSaveLoading),h=(0,o.v9)(c.selectRecord),v=Boolean(f.params.id),x=v?(0,s.ag)("entities.demandeAppui.edit.title"):(0,s.ag)("entities.demandeAppui.new.title");(0,a.useEffect)((function(){p(d.Z.doInit(f.params.id)),l(!0)}),[p,f.params.id]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(D.Z,{items:[[(0,s.ag)("dashboard.menu"),"/"],[(0,s.ag)("entities.demandeAppui.menu"),"/demande-appui"],[x]]}),(0,T.jsxs)(_.Z,{children:[g&&(0,T.jsx)(G.Z,{}),u&&!g&&(0,T.jsx)(O,{title:x,saveLoading:Z,record:h,isEditing:v,onSubmit:function(e,t){p(v?d.Z.doUpdate(e,t):d.Z.doCreate(t))},onCancel:function(){return(0,m.s1)().push("/demande-appui")}})]})]})}},61567:function(e,t,n){var i=n(72652),a=(n(47313),n(46417));t.Z=function(e){return(0,a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,a.jsx)(i.Z,{})})}},59961:function(e,t,n){var i=n(1413),a=n(59420),o=n(3920),r=n(47313),s=n(49384),d=n(43270),u=n(46417),l=function(e){var t=e.label,n=e.name,l=e.hint,p=e.layout,c=e.options,m=e.externalErrorMessage,f=e.required,g=(0,d.Gc)(),Z=g.register,h=g.errors,v=g.formState,x=v.touched,b=v.isSubmitted,j=g.setValue,y=g.watch;(0,r.useEffect)((function(){Z({name:n})}),[Z,n]);var A=s.Z.errorMessage(n,h,x,b,m),q=A||l;return(0,u.jsx)(a.Z.Item,(0,i.Z)((0,i.Z)({},p),{},{label:t,validateStatus:A?"error":"success",required:f,help:q,children:(0,u.jsx)(o.Z,{id:n,onChange:function(t){j(n,t.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t.target.value)},options:c,value:y(n)||""})}))};l.defaultProps={layout:null,required:!1},t.Z=l},42386:function(e,t,n){var i;function a(e){if("undefined"===typeof document)return 0;if(e||void 0===i){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),a=n.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var r=t.offsetWidth;o===r&&(r=n.clientWidth),document.body.removeChild(n),i=o-r}return i}n.d(t,{Z:function(){return a}})}}]);