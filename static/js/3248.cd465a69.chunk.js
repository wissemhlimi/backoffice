"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[3248],{50576:function(e,t,n){var r=n(76747),i=n(86495),o=n(26319),a=n(71945),l=(0,r.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new o.Z(e,t).match(a.Z.values.categoryAppelRead)})),s=(0,r.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new o.Z(e,t).match(a.Z.values.categoryAppelEdit)})),u=(0,r.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new o.Z(e,t).match(a.Z.values.categoryAppelCreate)})),c=(0,r.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new o.Z(e,t).match(a.Z.values.categoryAppelImport)})),d={selectPermissionToRead:l,selectPermissionToEdit:s,selectPermissionToCreate:u,selectPermissionToDestroy:(0,r.P1)([i.Z.selectCurrentTenant,i.Z.selectCurrentUser],(function(e,t){return new o.Z(e,t).match(a.Z.values.categoryAppelDestroy)})),selectPermissionToImport:c};t.Z=d},14184:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(1413),i=n(45987),o=n(93433),a=n(29439),l=n(47313),s=n(44935),u=n(74165),c=n(15861),d=n(48216),p=n(10499),f=n(98661),h=n(33512),Z=n(46417),m=function(e){var t=(0,l.useState)(!1),n=(0,a.Z)(t,2),r=n[0],i=n[1],o=function(){var t=(0,c.Z)((0,u.Z)().mark((function t(n,r){var o,a,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i(!0),t.next=4,s.Z.create(r);case 4:return o=t.sent,a=o.id,t.next=8,s.Z.find(a);case 8:l=t.sent,e.onSuccess(l),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h.Z.handle(t.t0);case 15:return t.prev=15,i(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}();return e.visible?(0,Z.jsx)(d.Z,{style:{top:24},title:(0,p.ag)("entities.categoryAppel.new.title"),visible:e.visible,onCancel:function(){return e.onCancel()},footer:!1,width:"80%",children:(0,Z.jsx)(f.Z,{saveLoading:r,onSubmit:o,onCancel:e.onCancel,modal:!0})}):null},v=n(51552),g=n(45788),x=n(50576),y=n(43270),b=["form"],C=function(e){var t=(0,l.useState)(!1),n=(0,a.Z)(t,2),u=n[0],c=n[1],d=(0,y.Gc)(),p=d.setValue,f=d.getValues,h=(0,g.v9)(x.Z.selectPermissionToCreate),C=function(){c(!1)},j=(e.form,(0,i.Z)(e,b));return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.Z,(0,r.Z)((0,r.Z)({},j),{},{fetchFn:function(e,t){return s.Z.listAutocomplete(e,t)},mapper:{toAutocomplete:function(e){if(!e)return null;var t=e.id,n=e.label;return e.titleFR?n=e.titleFR:e.titleAR?n=e.titleAR:e.titleEN&&(n=e.titleEN),{key:t,label:n}},toValue:function(e){return e?{id:e.key,label:e.label}:null}},onOpenModal:function(){c(!0)},inMemoryFilter:!0,hasPermissionToCreate:h})),(0,Z.jsx)(m,{visible:u,onCancel:C,onSuccess:function(t){var n=e.name,r=e.mode;p(n,r&&"multiple"===r?[].concat((0,o.Z)(f()[n]||[]),[t]):t,{shouldValidate:!0,shouldDirty:!0}),C()}})]})}},98661:function(e,t,n){var r=n(1413),i=n(29439),o=n(92350),a=n(12196),l=n(11829),s=n(73591),u=n(68197),c=n(59624),d=n(59420),p=n(96995),f=n(59491),h=n(43270),Z=n(47313),m=n(10499),v=n(68160),g=n(6473),x=n(89994),y=n(67357),b=n(56148),C=n(30513),j=n(75352),A=n(46417),w=s.Z.TabPane,F=g.Ry().shape({titleFR:x.Z.string((0,m.ag)("entities.categoryAppel.fields.title"),{required:!1}),descriptionFR:x.Z.string((0,m.ag)("entities.categoryAppel.fields.description"),{}),titleAR:x.Z.string((0,m.ag)("entities.categoryAppel.fields.title"),{required:!1}),descriptionAR:x.Z.string((0,m.ag)("entities.categoryAppel.fields.description"),{}),titleEN:x.Z.string((0,m.ag)("entities.categoryAppel.fields.title"),{required:!1}),descriptionEN:x.Z.string((0,m.ag)("entities.categoryAppel.fields.description"),{})});t.Z=function(e){var t=(0,Z.useState)((function(){var t=e.record||{};return{titleFR:t.titleFR,descriptionFR:t.descriptionFR,titleAR:t.titleAR,descriptionAR:t.descriptionAR,titleEN:t.titleEN,descriptionEN:t.descriptionEN}})),n=(0,i.Z)(t,1)[0],g=(0,h.cI)({resolver:(0,y.X)(F),mode:"all",defaultValues:n}),x=function(t){var n;e.onSubmit(null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.id,t)},R=e.saveLoading;return(0,A.jsx)(v.ZP,{children:(0,A.jsx)(h.RV,(0,r.Z)((0,r.Z)({},g),{},{children:(0,A.jsxs)("form",{onSubmit:g.handleSubmit(x),children:[(0,A.jsxs)(u.Z,{gutter:24,children:[(0,A.jsx)(c.Z,{span:16,children:(0,A.jsx)(j.Z,{children:e.title})}),(0,A.jsx)(c.Z,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:(0,A.jsxs)(d.Z.Item,(0,r.Z)((0,r.Z)({className:"form-buttons"},v.YT),{},{children:[(0,A.jsx)(p.Z,{title:(0,m.ag)("common.save"),children:(0,A.jsx)(f.Z,{loading:R,type:"primary",onClick:g.handleSubmit(x),icon:(0,A.jsx)(o.Z,{rev:void 0})})}),(0,A.jsx)(p.Z,{title:(0,m.ag)("common.reset"),children:(0,A.jsx)(f.Z,{disabled:R,onClick:function(){Object.keys(n).forEach((function(e){g.setValue(e,n[e])}))},icon:(0,A.jsx)(a.Z,{rev:void 0})})}),e.onCancel&&(0,A.jsx)(p.Z,{title:(0,m.ag)("common.cancel"),children:(0,A.jsx)(f.Z,{disabled:R,onClick:function(){return e.onCancel()},icon:(0,A.jsx)(l.Z,{rev:void 0})})})]}))})]}),(0,A.jsx)(u.Z,{gutter:24,children:(0,A.jsx)(c.Z,{span:24,children:(0,A.jsxs)(s.Z,{defaultActiveKey:"1",onChange:function(e){},children:[(0,A.jsx)(w,{tab:(0,m.ag)("common.informationsAR"),children:(0,A.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,A.jsx)(b.Z,{name:"titleAR",label:(0,m.ag)("entities.categoryAppel.fields.title"),required:!0,layout:v.I4,autoFocus:!0}),(0,A.jsx)(C.Z,{name:"descriptionAR",label:(0,m.ag)("entities.categoryAppel.fields.description"),required:!1,layout:v.I4})]})},"1"),(0,A.jsx)(w,{tab:(0,m.ag)("common.informationsFR"),children:(0,A.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,A.jsx)(b.Z,{name:"titleFR",label:(0,m.ag)("entities.categoryAppel.fields.title"),required:!1,layout:v.I4,autoFocus:!0}),(0,A.jsx)(C.Z,{name:"descriptionFR",label:(0,m.ag)("entities.categoryAppel.fields.description"),required:!1,layout:v.I4})]})},"2"),(0,A.jsx)(w,{tab:(0,m.ag)("common.informationsEN"),children:(0,A.jsxs)("fieldset",{style:{borderTopWidth:0},children:[(0,A.jsx)(b.Z,{name:"titleEN",label:(0,m.ag)("entities.categoryAppel.fields.title"),required:!1,layout:v.I4,autoFocus:!0}),(0,A.jsx)(C.Z,{name:"descriptionEN",label:(0,m.ag)("entities.categoryAppel.fields.description"),required:!1,layout:v.I4})]})},"3")]})})})]})}))})}},51552:function(e,t,n){var r=n(1413),i=n(74165),o=n(15861),a=n(29439),l=n(82138),s=n(61143),u=n(59420),c=n(59491),d=n(65375),p=n.n(d),f=n(47313),h=n(10499),Z=n(49384),m=n(65237),v=n(43270),g=n(46417),x=function(e){var t=(0,v.Gc)(),n=t.errors,d=t.watch,x=t.setValue,y=t.register,b=t.formState,C=b.touched,j=b.isSubmitted,A=e.label,w=e.name,F=e.hint,R=e.layout,S=e.size,k=e.placeholder,E=e.autoFocus,T=e.externalErrorMessage,P=e.defaultActiveFirstOption,V=e.allowClear,q=e.mode,I=e.required,N=e.fetchFn,M=e.mapper,B=d(w);(0,f.useEffect)((function(){y({name:w})}),[y,w]);var D=(0,f.useState)([]),O=(0,a.Z)(D,2),L=O[0],U=O[1],z=(0,f.useState)([]),G=(0,a.Z)(z,2),W=G[0],_=G[1],K=(0,f.useState)([]),X=(0,a.Z)(K,2),Y=X[0],H=X[1],J=(0,f.useState)(!1),Q=(0,a.Z)(J,2),$=Q[0],ee=Q[1],te=(0,f.useRef)("NOT_INITIALIZED");(0,f.useEffect)((function(){ne()}),[B]),(0,f.useEffect)((function(){se("")}),[]);var ne=function(){if(B){var e=("multiple"===q?B:[B])||[];e=e.filter(Boolean).map(M.toAutocomplete).map((function(e){return{id:e.key,label:e.label}})),_((function(t){return p()(t,e,"id")})),U((function(t){return p()(t,e,"id")}))}},re=e.inMemoryFilter?W:L,ie=function(e){return(re||[]).find((function(t){return t.id===e.key}))||e},oe="multiple"===q?B?B.map((function(e){return M.toAutocomplete(ie(e))})):[]:function(){if(B)return M.toAutocomplete(ie(B))}(),ae=function(t){if(!t)return x(w,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));var n=t.map((function(e){return M.toValue(e)}));x(w,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},le=function(t){if(!t)return x(w,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));var n=M.toValue(t);x(w,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},se=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.inMemoryFilter){t.next=2;break}return t.abrupt("return",ue(n));case 2:return t.abrupt("return",de(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ue=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Y)&&n.length){e.next=5;break}return e.next=4,ce();case 4:n=e.sent;case 5:_(n.filter((function(e){return String(e.label||"").toLowerCase().includes(String(t||"").toLowerCase())}))),ee(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,N();case 4:return t=e.sent,H(t),ee(!1),e.abrupt("return",t);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),H([]),ee(!1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==te.current){e.next=2;break}return e.abrupt("return");case 2:return te.current=t,ee(!0),e.prev=4,e.next=7,N(t,100);case 7:n=e.sent,te.current===t&&(ee(!1),U(n)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),te.current===t&&(ee(!1),U([]));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),pe=(0,m.Z)(se,300);(0,f.useEffect)((function(){return function(){pe.flush()}}),[pe]);var fe=re.filter((function(e){return Boolean(e.id)})).map((function(e){return(0,g.jsx)(s.Z.Option,{value:e.id,children:e.label},e.id)})),he=Z.Z.errorMessage(w,n,C,j,T);return(0,g.jsx)(u.Z.Item,(0,r.Z)((0,r.Z)({},R),{},{label:A,required:I,validateStatus:he?"error":"success",help:$?(0,h.ag)("autocomplete.loading"):he||F,children:(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsx)(s.Z,{id:w,showSearch:!0,mode:q,labelInValue:!0,showArrow:!1,filterOption:!1,notFoundContent:null,onChange:function(e){return"multiple"===q?ae(e):le(e)},onBlur:function(t){e.onBlur&&e.onBlur(t)},value:oe,onSearch:pe.callback,placeholder:k||void 0,size:S||void 0,autoFocus:E||!1,defaultActiveFirstOption:P,allowClear:V,children:fe}),e.showCreate&&e.hasPermissionToCreate?(0,g.jsx)(c.Z,{style:{marginLeft:"16px",flexShrink:0},type:"primary",icon:(0,g.jsx)(l.Z,{rev:void 0}),onClick:e.onOpenModal,htmlType:"button"}):null]})}))};x.defaultProps={layout:null,defaultActiveFirstOption:!0,allowClear:!0,mode:"default",required:!1,inMemoryFilter:!1},t.Z=x},5544:function(e,t,n){var r=n(1413),i=n(59420),o=n(61143),a=n(47313),l=n(49384),s=n(43270),u=n(46417),c=function(e){var t=e.label,n=e.name,c=e.hint,d=e.layout,p=e.size,f=e.placeholder,h=e.options,Z=e.mode,m=e.autoFocus,v=e.required,g=e.externalErrorMessage,x=e.optionFilterProp,y=(0,s.Gc)(),b=y.register,C=y.errors,j=y.formState,A=j.touched,w=j.isSubmitted,F=y.setValue,R=y.watch,S=l.Z.errorMessage(n,C,A,w,g),k=R(n);return(0,a.useEffect)((function(){b({name:n})}),[b,n]),(0,u.jsx)(i.Z.Item,(0,r.Z)((0,r.Z)({},d),{},{label:t,validateStatus:S?"error":"success",required:v,help:S||c,children:(0,u.jsx)(o.Z,{id:n,onChange:function(t){F(n,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},onBlur:function(t){e.onBlur&&e.onBlur(t)},value:k,size:p||void 0,placeholder:f||void 0,autoFocus:m||!1,mode:Z||void 0,optionFilterProp:x||"children",allowClear:!0,style:{width:"100%"},children:h.map((function(e){return(0,u.jsx)(o.Z.Option,{value:e.value,title:e.title,children:e.label},e.value)}))})}))};c.defaultProps={layout:null,required:!1},t.Z=c},30513:function(e,t,n){var r=n(1413),i=n(59420),o=n(46937),a=n(43270),l=n(47313),s=n(49384),u=n(46417),c=function(e){var t=e.label,n=e.name,c=e.hint,d=e.layout,p=e.placeholder,f=e.autoFocus,h=e.autoComplete,Z=e.prefix,m=e.required,v=e.rows,g=e.externalErrorMessage,x=e.maxLength,y=(0,a.Gc)(),b=y.register,C=y.errors,j=y.formState,A=j.touched,w=j.isSubmitted,F=y.setValue,R=y.watch,S=s.Z.errorMessage(n,C,A,w,g),k=R(n);return(0,l.useEffect)((function(){b({name:n})}),[b,n]),(0,u.jsx)(i.Z.Item,(0,r.Z)((0,r.Z)({},d),{},{label:t,required:m,validateStatus:S?"error":"success",help:S||c,children:(0,u.jsx)(o.Z.TextArea,{id:n,onChange:function(t){F(n,t.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t.target.value)},onBlur:function(t){e.onBlur&&e.onBlur(t)},maxLength:x,value:k,placeholder:p||void 0,autoFocus:f||!1,autoComplete:h||void 0,prefix:Z||void 0,rows:v,style:{width:"100%"}})}))};c.defaultProps={layout:null,required:!1,rows:4},t.Z=c}}]);